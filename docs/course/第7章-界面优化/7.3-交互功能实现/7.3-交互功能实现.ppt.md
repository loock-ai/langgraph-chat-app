---
marp: true
theme: gaia
paginate: true
header: '7.3-äº¤äº’åŠŸèƒ½å®ç°'
style: |
  section {
    font-size: 30px;
  }
---

<!-- _class: lead -->
# ç¬¬7ç«  ç•Œé¢ä¼˜åŒ– ğŸ¨

## 7.3 äº¤äº’åŠŸèƒ½å®ç°

**è®©ç•Œé¢å……æ»¡ç”Ÿå‘½åŠ›çš„äº¤äº’è®¾è®¡**

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- **å®ç°ä¸°å¯Œçš„é”®ç›˜å¿«æ·é”®å’Œæ‰‹åŠ¿æ“ä½œ**
- **æŒæ¡æµç•…çš„åŠ¨ç”»è¿‡æ¸¡å’Œå¾®äº¤äº’è®¾è®¡**
- **å»ºç«‹å®Œå–„çš„ç”¨æˆ·åé¦ˆå’ŒçŠ¶æ€æŒ‡ç¤ºç³»ç»Ÿ**
- **ä¼˜åŒ–äº¤äº’å“åº”æ—¶é—´å’Œç”¨æˆ·ä½“éªŒ**

è®©æ¯ä¸€æ¬¡äº¤äº’éƒ½ä»¤äººæ„‰æ‚¦ï¼

---

## ğŸ“š ç°ä»£äº¤äº’è®¾è®¡åŸåˆ™

### äº¤äº’è®¾è®¡æ ¸å¿ƒåŸåˆ™
- **å³æ—¶åé¦ˆ** - æ¯ä¸ªæ“ä½œéƒ½è¦æœ‰æ¸…æ™°çš„è§†è§‰åé¦ˆ
- **æ¸è¿›å¢å¼º** - åŸºç¡€åŠŸèƒ½å…ˆè¡Œï¼Œé«˜çº§äº¤äº’ä½œä¸ºè¡¥å……
- **ä¸€è‡´æ€§** - ç›¸åŒç±»å‹çš„æ“ä½œæœ‰ç›¸åŒçš„äº¤äº’æ¨¡å¼
- **å¯é¢„æµ‹æ€§** - ç”¨æˆ·èƒ½å¤Ÿé¢„æœŸæ“ä½œçš„ç»“æœ

### äº¤äº’å±‚æ¬¡æ¶æ„
```
åŸºç¡€äº¤äº’å±‚ï¼šæ ¸å¿ƒæ“ä½œ â†’ å¢å¼ºäº¤äº’å±‚ï¼šæ•ˆç‡æå‡ â†’ é«˜çº§äº¤äº’å±‚ï¼šä½“éªŒä¼˜åŒ–
```

---

## ğŸ’¡ é”®ç›˜å¿«æ·é”®ç³»ç»Ÿ

```typescript
// å…¨å±€å¿«æ·é”®ç®¡ç†
export function useChatShortcuts({
  onNewSession, onToggleSidebar, onFocusInput
}) {
  const shortcuts = [
    {
      key: 'n', ctrlKey: true,
      callback: onNewSession,
      description: 'æ–°å»ºä¼šè¯'
    },
    {
      key: 'b', ctrlKey: true,
      callback: onToggleSidebar,
      description: 'åˆ‡æ¢ä¾§è¾¹æ '
    },
    {
      key: 'k', ctrlKey: true,
      callback: onFocusInput,
      description: 'èšç„¦è¾“å…¥æ¡†'
    },
    {
      key: 'Escape',
      callback: () => document.activeElement?.blur(),
      description: 'å–æ¶ˆæ“ä½œ'
    }
  ];

  return useKeyboardShortcuts(shortcuts);
}
```

é«˜æ•ˆçš„é”®ç›˜æ“ä½œè®©ä¸“ä¸šç”¨æˆ·çˆ±ä¸é‡Šæ‰‹ï¼

---

## ğŸ”— åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ

### æ¶ˆæ¯è¿›å…¥åŠ¨ç”»
```typescript
import { motion, AnimatePresence } from 'framer-motion';

export function MessageAnimation({ message, children }) {
  const isUser = message.role === 'user';

  return (
    <motion.div
      initial={{
        opacity: 0,
        y: 20,
        x: isUser ? 20 : -20,
        scale: 0.95
      }}
      animate={{
        opacity: 1,
        y: 0,
        x: 0,
        scale: 1
      }}
      transition={{
        type: "spring",
        stiffness: 300,
        damping: 30,
        mass: 0.8
      }}
      layout
    >
      {children}
    </motion.div>
  );
}
```

---

## ğŸ”— æµå¼æ–‡å­—åŠ¨ç”»

```typescript
// æ‰“å­—æœºæ•ˆæœå®ç°
export function TypewriterText({ text, speed = 50 }) {
  const [displayedText, setDisplayedText] = useState('');
  const [currentIndex, setCurrentIndex] = useState(0);

  useEffect(() => {
    if (currentIndex < text.length) {
      const timer = setTimeout(() => {
        setDisplayedText(text.slice(0, currentIndex + 1));
        setCurrentIndex(currentIndex + 1);
      }, speed);

      return () => clearTimeout(timer);
    }
  }, [currentIndex, text, speed]);

  return (
    <span>
      {displayedText}
      {currentIndex < text.length && (
        <motion.span
          animate={{ opacity: [1, 0] }}
          transition={{ repeat: Infinity, duration: 0.8 }}
          className="inline-block w-0.5 h-4 bg-current ml-1"
        />
      )}
    </span>
  );
}
```

è‡ªç„¶çš„æ‰“å­—æ•ˆæœè®©AIå›å¤æ›´æœ‰æ¸©åº¦ï¼

---

## ğŸŒŸ å¾®äº¤äº’æ•ˆæœ

### æŒ‰é’®äº¤äº’æ•ˆæœ
```typescript
export function InteractiveButton({ children, onClick, variant = 'primary' }) {
  const [isPressed, setIsPressed] = useState(false);
  const [ripples, setRipples] = useState([]);

  const handleClick = (e) => {
    // åˆ›å»ºç‚¹å‡»æ³¢çº¹æ•ˆæœ
    const rect = e.currentTarget.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    const newRipple = { id: Date.now(), x, y };
    setRipples(prev => [...prev, newRipple]);

    // æ¸…ç†æ³¢çº¹
    setTimeout(() => {
      setRipples(prev => prev.filter(ripple => ripple.id !== newRipple.id));
    }, 600);

    onClick?.();
  };

  return (
    <motion.button
      className="relative overflow-hidden rounded-lg font-medium transition-all duration-200"
      onClick={handleClick}
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
    >
      {/* æ³¢çº¹æ•ˆæœ */}
      {ripples.map(ripple => (
        <motion.div
          key={ripple.id}
          className="absolute bg-white/30 rounded-full pointer-events-none"
          style={{ left: ripple.x - 10, top: ripple.y - 10, width: 20, height: 20 }}
          initial={{ scale: 0, opacity: 1 }}
          animate={{ scale: 4, opacity: 0 }}
          transition={{ duration: 0.6 }}
        />
      ))}
      <span className="relative z-10">{children}</span>
    </motion.button>
  );
}
```

---

## ğŸ”— è¾“å…¥æ¡†ç„¦ç‚¹æ•ˆæœ

```typescript
export function AnimatedInput({ value, onChange, label, error }) {
  const [isFocused, setIsFocused] = useState(false);
  const hasValue = value.length > 0;
  const shouldFloatLabel = isFocused || hasValue;

  return (
    <div className="relative">
      <motion.div
        className={cn(
          'relative border rounded-lg transition-all duration-200',
          isFocused ? 'border-blue-500 shadow-lg shadow-blue-500/20' : 'border-slate-300',
          error ? 'border-red-500' : ''
        )}
      >
        <input
          value={value}
          onChange={(e) => onChange(e.target.value)}
          onFocus={() => setIsFocused(true)}
          onBlur={() => setIsFocused(false)}
          className="w-full px-4 py-3 bg-transparent outline-none"
        />

        {/* æµ®åŠ¨æ ‡ç­¾ */}
        <motion.label
          className={cn(
            'absolute left-4 pointer-events-none transition-all duration-200',
            shouldFloatLabel ? 'top-2 text-xs' : 'top-1/2 -translate-y-1/2 text-sm',
            isFocused ? 'text-blue-500' : 'text-slate-500'
          )}
          animate={{
            scale: shouldFloatLabel ? 0.85 : 1,
          }}
        >
          {label}
        </motion.label>

        {/* ç„¦ç‚¹æŒ‡ç¤ºçº¿ */}
        <motion.div
          className="absolute bottom-0 left-0 h-0.5 bg-blue-500"
          initial={{ width: 0 }}
          animate={{ width: isFocused ? '100%' : 0 }}
        />
      </motion.div>
    </div>
  );
}
```

---

## ğŸ”§ æ‰‹åŠ¿æ“ä½œæ”¯æŒ

```typescript
// è§¦æ‘¸æ‰‹åŠ¿å¤„ç†
export function useGestures(handlers) {
  const elementRef = useRef(null);

  useEffect(() => {
    const element = elementRef.current;
    if (!element) return;

    const handleTouchStart = (e) => {
      const touch = e.touches[0];
      touchStartRef.current = {
        x: touch.clientX,
        y: touch.clientY,
        time: Date.now()
      };
    };

    const handleTouchEnd = (e) => {
      if (!touchStartRef.current) return;

      const touch = e.changedTouches[0];
      const deltaX = touch.clientX - touchStartRef.current.x;
      const deltaY = touch.clientY - touchStartRef.current.y;

      // æ»‘åŠ¨æ£€æµ‹
      const minSwipeDistance = 50;
      if (Math.abs(deltaX) > minSwipeDistance) {
        if (deltaX > 0) {
          handlers.onSwipeRight?.();
        } else {
          handlers.onSwipeLeft?.();
        }
      }
    };

    element.addEventListener('touchstart', handleTouchStart);
    element.addEventListener('touchend', handleTouchEnd);

    return () => {
      element.removeEventListener('touchstart', handleTouchStart);
      element.removeEventListener('touchend', handleTouchEnd);
    };
  }, [handlers]);

  return elementRef;
}
```

---

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### åŠ¨ç”»æ€§èƒ½é…ç½®
```typescript
export const animationConfig = {
  // æ£€æµ‹ç”¨æˆ·åå¥½
  reduceMotion: typeof window !== 'undefined' && 
    window.matchMedia('(prefers-reduced-motion: reduce)').matches,
  
  // æ€§èƒ½å‹å¥½çš„åŠ¨ç”»é…ç½®
  spring: {
    type: "spring",
    stiffness: 300,
    damping: 30,
    mass: 0.8
  },
  
  // å¿«é€ŸåŠ¨ç”»
  fast: {
    duration: 0.2,
    ease: "easeOut"
  }
};

// æ€§èƒ½ç›‘æ§
export function usePerformanceMonitor() {
  useEffect(() => {
    let frameCount = 0;
    let lastTime = performance.now();
    
    function measureFPS() {
      frameCount++;
      const currentTime = performance.now();
      
      if (currentTime >= lastTime + 1000) {
        const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
        
        if (fps < 30) {
          console.warn('ä½å¸§ç‡æ£€æµ‹:', fps, 'FPS');
        }
        
        frameCount = 0;
        lastTime = currentTime;
      }
      
      requestAnimationFrame(measureFPS);
    }
    
    requestAnimationFrame(measureFPS);
  }, []);
}
```

---

## ğŸ“‹ æ€»ç»“è¦ç‚¹

- **é”®ç›˜å¿«æ·é”®** - é«˜æ•ˆçš„é”®ç›˜æ“ä½œç³»ç»Ÿ
- **åŠ¨ç”»è¿‡æ¸¡** - æµç•…è‡ªç„¶çš„è§†è§‰æ•ˆæœ
- **å¾®äº¤äº’** - ç»†è‡´çš„ç”¨æˆ·åé¦ˆæœºåˆ¶
- **æ‰‹åŠ¿æ“ä½œ** - è§¦æ‘¸è®¾å¤‡çš„äº¤äº’æ”¯æŒ
- **æ€§èƒ½ä¼˜åŒ–** - ä¿è¯äº¤äº’æµç•…æ€§

ä¸°å¯Œçš„äº¤äº’è®©ç•Œé¢å……æ»¡ç”Ÿå‘½åŠ›ï¼

---

## ğŸš€ ä¸‹ä¸€æ­¥é¢„å‘Š

å®Œæˆäº†äº¤äº’åŠŸèƒ½å®ç°åï¼Œæˆ‘ä»¬å°†å­¦ä¹ ï¼š

**7.4 ç»„ä»¶ä¼˜åŒ–**
- Reactç»„ä»¶æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- å®Œå–„çš„å¯è®¿é—®æ€§æ”¯æŒ
- å¯å¤ç”¨çš„ç»„ä»¶åº“æ„å»º
- ç»„ä»¶æµ‹è¯•å’Œè´¨é‡ä¿è¯

è®©ç»„ä»¶æ›´åŠ ä¸“ä¸šå’Œå¯ç»´æŠ¤ï¼
