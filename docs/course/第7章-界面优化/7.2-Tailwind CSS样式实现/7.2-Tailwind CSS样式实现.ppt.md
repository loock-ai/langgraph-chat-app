---
marp: true
theme: gaia
paginate: true
header: '7.2-Tailwind CSS样式实现'
style: |
  section {
    font-size: 30px;
  }
---

<!-- _class: lead -->
# 第7章 界面优化 🎨

## 7.2 Tailwind CSS样式实现

**将设计转化为完美的代码**

---

## 🎯 学习目标

- **掌握Tailwind CSS的高级配置和自定义主题**
- **学会创建可复用的组件样式系统**
- **实现复杂的布局和视觉效果**
- **优化CSS性能和维护性**

让每一行CSS代码都精确高效！

---

## 📚 Tailwind CSS进阶应用

### Tailwind的核心优势
- **实用类优先** - 快速构建界面无需写CSS
- **设计系统** - 内置的设计令牌和约束
- **响应式设计** - 移动优先的断点系统
- **可定制性** - 完全可配置的主题系统

### 配置策略
通过 tailwind.config.js 扩展默认配置，添加聊天应用专用的设计令牌

---

## 💡 自定义主题配置

```javascript
// tailwind.config.js - 核心配置
module.exports = {
  theme: {
    extend: {
      // 自定义颜色系统
      colors: {
        brand: {
          500: '#0ea5e9',
          600: '#0284c7',
        },
        chat: {
          'user-bg': '#667eea',
          'user-text': '#ffffff',
          'ai-bg': '#ffffff',
          'ai-text': '#374151',
          'timestamp': '#9ca3af',
        }
      },

      // 自定义动画
      animation: {
        'fade-in': 'fadeIn 0.3s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
        'typing': 'typing 1.5s infinite',
      },

      // 自定义阴影
      boxShadow: {
        'bubble': '0 2px 8px 0 rgba(0, 0, 0, 0.1)',
        'floating': '0 8px 32px 0 rgba(0, 0, 0, 0.12)',
      }
    }
  }
};
```

---

## 🔗 组件样式实现

### 消息气泡组件
```typescript
export default function MessageBubble({ message, isStreaming = false }) {
  const isUser = message.role === 'user';

  return (
    <div className={cn(
      'flex items-end space-x-2 mb-4 animate-fade-in',
      isUser ? 'justify-end' : 'justify-start'
    )}>
      {/* 消息内容 */}
      <div className={cn(
        'max-w-xs lg:max-w-md group',
        isUser ? 'order-1' : 'order-2'
      )}>
        {/* 消息气泡 */}
        <div className={cn(
          'relative px-4 py-3 rounded-2xl shadow-bubble transition-all duration-200 hover:scale-[1.02]',
          isUser ? [
            'bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500',
            'text-white rounded-br-md shadow-blue-500/25'
          ] : [
            'bg-white/90 backdrop-blur-sm text-slate-800',
            'border border-slate-200/60 rounded-bl-md'
          ]
        )}>
          <p className="text-sm leading-relaxed whitespace-pre-wrap">
            {message.content}
            {isStreaming && (
              <span className="inline-block w-0.5 h-4 bg-current ml-1 animate-typing"></span>
            )}
          </p>
        </div>
      </div>
    </div>
  );
}
```

---

## 🔗 聊天输入框实现

```typescript
export default function ChatInput({ onSendMessage, disabled = false }) {
  const [input, setInput] = useState('');
  const [isFocused, setIsFocused] = useState(false);

  return (
    <div className="bg-white/80 backdrop-blur-lg border-t border-slate-200/60">
      <div className="max-w-4xl mx-auto p-4">
        <div className={cn(
          'flex items-end space-x-3 bg-white rounded-2xl p-2 border transition-all duration-200',
          isFocused ? 'border-blue-300 shadow-lg shadow-blue-500/10' : 'border-slate-200'
        )}>
          {/* 文本输入框 */}
          <textarea
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onFocus={() => setIsFocused(true)}
            onBlur={() => setIsFocused(false)}
            className="w-full resize-none border-none outline-none bg-transparent text-sm leading-relaxed placeholder-slate-400 min-h-[2.5rem] max-h-[7.5rem] py-2 px-3"
            placeholder="输入消息..."
          />

          {/* 发送按钮 */}
          <button
            onClick={handleSend}
            disabled={!input.trim() || disabled}
            className={cn(
              'w-10 h-10 rounded-xl transition-all duration-200 flex items-center justify-center',
              input.trim() && !disabled ? [
                'bg-gradient-to-r from-blue-500 to-purple-500',
                'hover:from-blue-600 hover:to-purple-600',
                'text-white shadow-lg hover:shadow-xl',
                'hover:scale-105 active:scale-95'
              ] : [
                'bg-slate-100 text-slate-400 cursor-not-allowed'
              ]
            )}
          >
            📤
          </button>
        </div>
      </div>
    </div>
  );
}
```

---

## 🌟 响应式布局实现

```typescript
export default function ResponsiveChatLayout({ sidebar, main, header, footer }) {
  const [sidebarOpen, setSidebarOpen] = useState(false);

  return (
    <div className="h-screen flex flex-col bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 overflow-hidden">
      {/* 移动端遮罩 */}
      {sidebarOpen && (
        <div 
          className="fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden"
          onClick={() => setSidebarOpen(false)}
        />
      )}

      {/* 头部 */}
      <header className="flex-shrink-0 bg-white/80 backdrop-blur-lg border-b border-slate-200/60 shadow-sm z-30">
        {header}
      </header>

      {/* 主要内容 */}
      <div className="flex-1 flex overflow-hidden relative">
        {/* 侧边栏 */}
        <aside className={cn(
          'bg-white/60 backdrop-blur-sm border-r border-slate-200/60 overflow-y-auto z-50',
          'fixed lg:static inset-y-0 left-0 transform transition-transform duration-300',
          'w-80 lg:w-80',
          sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'
        )}>
          {sidebar}
        </aside>

        {/* 主聊天区域 */}
        <main className="flex-1 flex flex-col overflow-hidden">
          {main}
          {footer}
        </main>
      </div>
    </div>
  );
}
```

---

## 🔧 自定义插件实现

```javascript
// tailwind.config.js - 自定义插件
module.exports = {
  plugins: [
    function({ addComponents, theme }) {
      addComponents({
        // 消息气泡基础样式
        '.message-bubble': {
          padding: theme('spacing.3') + ' ' + theme('spacing.4'),
          borderRadius: theme('borderRadius.bubble'),
          boxShadow: theme('boxShadow.bubble'),
          maxWidth: theme('maxWidth.xs'),
          wordWrap: 'break-word',
          position: 'relative',
        },
        
        // 用户消息样式
        '.user-message': {
          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
          color: theme('colors.white'),
          marginLeft: 'auto',
          borderBottomRightRadius: theme('spacing.1'),
        },
        
        // AI消息样式
        '.ai-message': {
          backgroundColor: theme('colors.white'),
          color: theme('colors.gray.800'),
          border: '1px solid ' + theme('colors.gray.200'),
          borderBottomLeftRadius: theme('spacing.1'),
        },

        // 加载动画
        '.loading-dots': {
          display: 'inline-flex',
          alignItems: 'center',
          '& > div': {
            width: theme('spacing.1'),
            height: theme('spacing.1'),
            backgroundColor: 'currentColor',
            borderRadius: '50%',
            animation: 'bounce 1.4s infinite ease-in-out both',
          },
        },
      });
    },
  ],
};
```

---

## 🔧 性能优化技巧

### CSS打包优化
```javascript
// next.config.js
const nextConfig = {
  experimental: {
    optimizeCss: true, // 启用CSS优化
  },
  
  // 生产环境CSS优化
  ...(process.env.NODE_ENV === 'production' && {
    swcMinify: true,
    compiler: {
      removeConsole: true,
    },
  }),
};
```

### 类名合并工具
```typescript
// app/utils/cn.ts
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

// 使用示例
const buttonClasses = cn(
  'px-4 py-2 rounded-lg', // 基础样式
  isActive && 'bg-blue-500 text-white', // 条件样式
  disabled && 'opacity-50 cursor-not-allowed', // 状态样式
  className // 外部传入的样式
);
```

---

## 📋 总结要点

- **Tailwind配置** - 自定义主题和设计令牌系统
- **组件样式** - 可复用的样式组件和工具类
- **响应式设计** - 移动优先的布局策略
- **性能优化** - CSS打包和优化技巧
- **维护性** - 类名管理和主题系统

高效的CSS架构让开发更愉快！

---

## 🚀 下一步预告

完成了Tailwind CSS样式实现后，我们将学习：

**7.3 交互功能实现**
- 键盘快捷键和手势操作
- 流畅的动画过渡效果
- 微交互和用户反馈
- 交互性能优化

让界面不仅美观，更具有良好的交互体验！
