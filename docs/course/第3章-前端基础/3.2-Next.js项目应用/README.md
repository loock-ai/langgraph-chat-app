# 3.2 Next.jsé¡¹ç›®åº”ç”¨ ğŸš€

> æ·±åº¦åº”ç”¨Next.jsæ¡†æ¶ç‰¹æ€§ï¼Œæ„å»ºç°ä»£åŒ–AIåº”ç”¨

---

## ğŸ¯ å°èŠ‚æ¦‚è¿°ä¸å­¦ä¹ ç›®æ ‡

åŒå­¦ä»¬å¥½ï¼æ¬¢è¿æ¥åˆ°ç¬¬3ç« ç¬¬2èŠ‚ - Next.jsé¡¹ç›®åº”ç”¨ï¼ç»è¿‡ä¸Šä¸€èŠ‚ReactåŸºç¡€çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†ç»„ä»¶åŒ–å¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ç°åœ¨æˆ‘ä»¬è¦å°†è¿™äº›ç»„ä»¶æ•´åˆåˆ°Next.jsè¿™ä¸ªå¼ºå¤§çš„å…¨æ ˆæ¡†æ¶ä¸­ï¼Œæ„å»ºçœŸæ­£çš„ç°ä»£åŒ–AIåº”ç”¨ï¼

### å°èŠ‚æ ¸å¿ƒä»·å€¼å’Œé‡è¦æ€§

å¦‚æœè¯´Reactæ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„"ç§¯æœ¨"ï¼Œé‚£ä¹ˆNext.jså°±æ˜¯è®©è¿™äº›ç§¯æœ¨å˜æˆ"æ™ºèƒ½å»ºç­‘"çš„æ¶æ„å¸ˆã€‚Next.jsä¸ä»…ä»…æ˜¯ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ªå…¨æ ˆå¼€å‘å¹³å°ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ç”¨åŒä¸€å¥—æŠ€æœ¯æ ˆå®Œæˆå‰åç«¯çš„å¼€å‘ã€‚

è¿™ä¸€å°èŠ‚çš„ä»·å€¼åœ¨äºï¼š
- **æŒæ¡ç°ä»£åŒ–æ¶æ„**ï¼šå­¦ä¼šä½¿ç”¨App Routeræ„å»ºå¯æ‰©å±•çš„åº”ç”¨ç»“æ„
- **ç†è§£æ¸²æŸ“ç­–ç•¥**ï¼šæ˜ç™½ä»€ä¹ˆæ—¶å€™ç”¨æœåŠ¡ç«¯ç»„ä»¶ï¼Œä»€ä¹ˆæ—¶å€™ç”¨å®¢æˆ·ç«¯ç»„ä»¶
- **å®ç°å‰åç«¯ä¸€ä½“åŒ–**ï¼šç”¨API Routesæ„å»ºåç«¯æ¥å£ï¼Œå®ç°æ•°æ®äº¤äº’
- **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**ï¼šåˆ©ç”¨Next.jsçš„æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§æå‡åº”ç”¨ä½“éªŒ

### ä¸å‰åå°èŠ‚çš„è¿æ¥å…³ç³»

**æ‰¿æ¥ä¸Šä¸€èŠ‚çš„ReactåŸºç¡€**ï¼š
- å°†3.1èŠ‚åˆ›å»ºçš„Reactç»„ä»¶é›†æˆåˆ°Next.jsé¡µé¢ä¸­
- ä½¿ç”¨3.1èŠ‚å­¦åˆ°çš„çŠ¶æ€ç®¡ç†é…åˆNext.jsçš„æ•°æ®è·å–
- åŸºäº3.1èŠ‚çš„ç»„ä»¶é€šä¿¡æ„å»ºå®Œæ•´çš„åº”ç”¨æµç¨‹

**ä¸ºåç»­å°èŠ‚åšå‡†å¤‡**ï¼š
- 3.3èŠ‚çš„TypeScriptå°†ä¸ºæˆ‘ä»¬çš„Next.jsåº”ç”¨æä¾›ç±»å‹å®‰å…¨
- 3.4èŠ‚çš„Tailwind CSSå°†ç¾åŒ–æˆ‘ä»¬çš„Next.jsé¡µé¢
- ç¬¬4ç« çš„åç«¯å¼€å‘å°†æ‰©å±•æˆ‘ä»¬çš„API Routes

**å­¦ä¹ é€’è¿›å…³ç³»**ï¼š
```
3.1èŠ‚ï¼šReactç»„ä»¶åŸºç¡€ â†’ æŒæ¡äº†"é›¶ä»¶"åˆ¶é€ 
3.2èŠ‚ï¼šNext.jsæ¡†æ¶åº”ç”¨ â†’ å­¦ä¼š"äº§å“"ç»„è£…
3.3èŠ‚ï¼šTypeScriptç±»å‹å®‰å…¨ â†’ ç¡®ä¿"è´¨é‡"æ§åˆ¶
3.4èŠ‚ï¼šTailwindæ ·å¼ç¾åŒ– â†’ å®ç°"å¤–è§‚"ä¼˜åŒ–
```

### å…·ä½“çš„å­¦ä¹ ç›®æ ‡

å­¦å®Œè¿™ä¸€å°èŠ‚ï¼Œä½ å°†èƒ½å¤Ÿï¼š

1. **ç†è§£å¹¶åº”ç”¨App Routeræ¶æ„**ï¼šæŒæ¡Next.js 15çš„æœ€æ–°è·¯ç”±ç³»ç»Ÿ
2. **åˆç†é€‰æ‹©ç»„ä»¶ç±»å‹**ï¼šçŸ¥é“ä½•æ—¶ä½¿ç”¨æœåŠ¡ç«¯ç»„ä»¶ï¼Œä½•æ—¶ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶
3. **åˆ›å»ºAPI Routesæ¥å£**ï¼šæ„å»ºRESTful APIä¸ºå‰ç«¯æä¾›æ•°æ®
4. **å®ç°æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†**ï¼šåœ¨Next.jsä¸­å¤„ç†å¼‚æ­¥æ•°æ®å’ŒçŠ¶æ€æ›´æ–°
5. **ä¼˜åŒ–åº”ç”¨æ€§èƒ½**ï¼šåˆ©ç”¨Next.jsçš„å†…ç½®ä¼˜åŒ–ç‰¹æ€§æå‡ç”¨æˆ·ä½“éªŒ

---

## ğŸ“š æ ¸å¿ƒå†…å®¹æ·±åº¦è®²è§£

### ç¬¬ä¸€éƒ¨åˆ†ï¼šApp Routeræ¶æ„æ·±åº¦è§£æ ğŸ—ï¸

Next.js 15æœ€ä»¤äººå…´å¥‹çš„ç‰¹æ€§å°±æ˜¯App Routerã€‚å®ƒå½»åº•æ”¹å˜äº†æˆ‘ä»¬æ„å»ºReactåº”ç”¨çš„æ–¹å¼ã€‚è®©æˆ‘ç”¨ä¸€ä¸ªç”ŸåŠ¨çš„æ¯”å–»æ¥è§£é‡Šï¼š

**ä¼ ç»Ÿçš„Pages Router VS æ–°çš„App Router**ï¼š

```
Pages Routerå°±åƒä¼ ç»Ÿçš„åŠå…¬æ¥¼ï¼š
- æ¯ä¸ªæ–‡ä»¶å¤¹åªèƒ½æ”¾ç‰¹å®šçš„å†…å®¹
- è·¯ç”±å’Œé¡µé¢æ··åœ¨ä¸€èµ·ï¼Œç»“æ„å¤æ‚
- æ‰©å±•æ€§è¾ƒå·®ï¼Œå¤§å‹é¡¹ç›®éš¾ä»¥ç»´æŠ¤

App Routerå°±åƒç°ä»£åŒ–çš„æ™ºèƒ½å¤§å¦ï¼š
- æ¯ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„"æ¥¼å±‚"
- è·¯ç”±ã€é¡µé¢ã€å¸ƒå±€ã€åŠ è½½çŠ¶æ€åˆ†å·¥æ˜ç¡®
- é«˜åº¦æ¨¡å—åŒ–ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
```

#### App Routerçš„æ–‡ä»¶ç³»ç»Ÿè·¯ç”±

æˆ‘ä»¬çš„AIèŠå¤©åº”ç”¨çš„è·¯ç”±ç»“æ„ï¼š

```
app/
â”œâ”€â”€ page.tsx                 # ä¸»é¡µè·¯ç”± (/)
â”œâ”€â”€ layout.tsx              # æ ¹å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ globals.css             # å…¨å±€æ ·å¼
â”œâ”€â”€ components/             # å…±äº«ç»„ä»¶
â”‚   â””â”€â”€ SessionSidebar.tsx  # ä¼šè¯ä¾§è¾¹æ ç»„ä»¶
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ loadEnv.ts         # ç¯å¢ƒå˜é‡åŠ è½½
â”‚   â””â”€â”€ threadId.ts        # ä¼šè¯IDç®¡ç†
â””â”€â”€ api/                   # APIè·¯ç”±
    â””â”€â”€ chat/              # èŠå¤©ç›¸å…³API
        â”œâ”€â”€ route.ts       # èŠå¤©æ¥å£ (/api/chat)
        â””â”€â”€ sessions/      # ä¼šè¯ç®¡ç†
            â””â”€â”€ route.ts   # ä¼šè¯æ¥å£ (/api/chat/sessions)
```

#### é¡µé¢æ–‡ä»¶ç»“æ„(page.tsx)

æ¯ä¸ªè·¯ç”±çš„å…¥å£æ–‡ä»¶éƒ½å«`page.tsx`ã€‚è¿™å°±åƒæ¯æ ‹æ¥¼çš„"ä¸»å…¥å£"ï¼š

```tsx
// app/page.tsx - æˆ‘ä»¬çš„èŠå¤©åº”ç”¨ä¸»é¡µ
'use client'  // è¿™æ˜¯å®¢æˆ·ç«¯ç»„ä»¶

import { useState, useRef, useEffect } from 'react'
import { Send, Bot, User } from 'lucide-react'

export default function ChatPage() {
  // è¿™é‡Œæ˜¯æˆ‘ä»¬åœ¨3.1èŠ‚å­¦åˆ°çš„Reactç»„ä»¶é€»è¾‘
  const [messages, setMessages] = useState([])
  const [input, setInput] = useState('')
  
  return (
    <div className="èŠå¤©åº”ç”¨çš„å®Œæ•´ç•Œé¢">
      {/* èŠå¤©ç»„ä»¶å†…å®¹ */}
    </div>
  )
}
```

#### å¸ƒå±€æ–‡ä»¶(layout.tsx)

å¸ƒå±€æ–‡ä»¶æ˜¯App Routerçš„å¦ä¸€ä¸ªå¼ºå¤§ç‰¹æ€§ã€‚å®ƒå°±åƒå»ºç­‘çš„"æ¡†æ¶ç»“æ„"ï¼š

```tsx
// app/layout.tsx - æ ¹å¸ƒå±€
import type { Metadata } from "next";
import "./globals.css";

export const metadata: Metadata = {
  title: "LangGraph AI èŠå¤©åº”ç”¨",
  description: "åŸºäºLangGraphJSæ„å»ºçš„æ™ºèƒ½èŠå¤©åº”ç”¨",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="zh-CN">
      <body className="antialiased">
        {/* è¿™é‡Œå¯ä»¥æ”¾ç½®å…¨å±€çš„å¯¼èˆªæ ã€ä¾§è¾¹æ ç­‰ */}
        {children}  {/* å½“å‰é¡µé¢çš„å†…å®¹ä¼šæ¸²æŸ“åœ¨è¿™é‡Œ */}
      </body>
    </html>
  );
}
```

### ç¬¬äºŒéƒ¨åˆ†ï¼šç»„ä»¶ç±»å‹ç­–ç•¥é€‰æ‹© âš¡

è¿™æ˜¯Next.jsä¸­æœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼ç†è§£ä½•æ—¶ä½¿ç”¨æœåŠ¡ç«¯ç»„ä»¶ï¼Œä½•æ—¶ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶ï¼Œç›´æ¥å½±å“åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

#### æœåŠ¡ç«¯ç»„ä»¶ (Server Components) - é»˜è®¤é€‰æ‹©

æœåŠ¡ç«¯ç»„ä»¶å°±åƒ"é¢„åˆ¶èœ"ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæå‰å‡†å¤‡å¥½ï¼Œç”¨æˆ·æ‹¿åˆ°å°±èƒ½ç›´æ¥ä½¿ç”¨ï¼š

**ä¼˜åŠ¿**ï¼š
- âœ… æ›´å¿«çš„é¦–å±åŠ è½½é€Ÿåº¦
- âœ… æ›´å¥½çš„SEOè¡¨ç°
- âœ… å‡å°‘å®¢æˆ·ç«¯JavaScriptåŒ…å¤§å°
- âœ… ç›´æ¥è®¿é—®æœåŠ¡ç«¯èµ„æºï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- é™æ€å†…å®¹å±•ç¤º
- æ•°æ®è·å–å’Œå±•ç¤º
- é¡µé¢å¸ƒå±€å’Œå¯¼èˆª
- ä¸éœ€è¦ç”¨æˆ·äº¤äº’çš„ç»„ä»¶

```tsx
// æœåŠ¡ç«¯ç»„ä»¶ç¤ºä¾‹ - é™æ€ä¿¡æ¯å±•ç¤º
export default function AppInfo() {
  return (
    <div className="bg-blue-50 p-4 rounded-lg">
      <h2>å…³äºæˆ‘ä»¬çš„AIåŠ©æ‰‹</h2>
      <p>æœ¬åº”ç”¨åŸºäºLangGraphJSæ„å»ºï¼Œæä¾›æ™ºèƒ½å¯¹è¯æœåŠ¡</p>
      <p>æŠ€æœ¯æ ˆï¼šNext.js 15 + React 19 + TypeScript</p>
    </div>
  )
}
```

#### å®¢æˆ·ç«¯ç»„ä»¶ (Client Components) - æŒ‰éœ€ä½¿ç”¨

å®¢æˆ·ç«¯ç»„ä»¶å°±åƒ"ç°åšèœ"ï¼Œéœ€è¦åœ¨ç”¨æˆ·ç«¯å®æ—¶åˆ¶ä½œï¼Œæ”¯æŒå„ç§äº¤äº’ï¼š

**ç‰¹ç‚¹**ï¼š
- ğŸ”„ æ”¯æŒçŠ¶æ€ç®¡ç† (useState, useEffectç­‰)
- ğŸ¯ å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶
- ğŸŒ è®¿é—®æµè§ˆå™¨API
- âš¡ å®æ—¶æ•°æ®æ›´æ–°

**ä½¿ç”¨æ–¹æ³•**ï¼šåœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ `'use client'`æŒ‡ä»¤

```tsx
// å®¢æˆ·ç«¯ç»„ä»¶ç¤ºä¾‹ - äº¤äº’å¼èŠå¤©ç•Œé¢
'use client'

import { useState } from 'react'

export default function ChatInterface() {
  const [messages, setMessages] = useState([])
  const [input, setInput] = useState('')

  const sendMessage = async () => {
    // å¤„ç†ç”¨æˆ·è¾“å…¥å’ŒAPIè°ƒç”¨
  }

  return (
    <div>
      {/* æ¶ˆæ¯åˆ—è¡¨ */}
      <div>
        {messages.map(message => (
          <div key={message.id}>{message.content}</div>
        ))}
      </div>
      
      {/* è¾“å…¥æ¡† */}
      <input 
        value={input}
        onChange={(e) => setInput(e.target.value)}
        onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
      />
    </div>
  )
}
```

#### æ··åˆä½¿ç”¨ç­–ç•¥ - æœ€ä½³å®è·µ

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ··åˆä½¿ç”¨ï¼š

```tsx
// app/page.tsx - ä¸»é¡µé¢ï¼ˆæœåŠ¡ç«¯ç»„ä»¶ï¼‰
import ChatInterface from './components/ChatInterface'  // å®¢æˆ·ç«¯ç»„ä»¶
import AppHeader from './components/AppHeader'          // æœåŠ¡ç«¯ç»„ä»¶

export default function HomePage() {
  return (
    <div>
      {/* æœåŠ¡ç«¯ç»„ä»¶ - é™æ€å¤´éƒ¨ */}
      <AppHeader />
      
      {/* å®¢æˆ·ç«¯ç»„ä»¶ - äº¤äº’å¼èŠå¤© */}
      <ChatInterface />
    </div>
  )
}
```

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šAPI Routeså®ç° ğŸ”Œ

API Routesæ˜¯Next.jsçš„"åç«¯è¶…èƒ½åŠ›"ï¼å®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­åˆ›å»ºåç«¯æ¥å£ï¼ŒçœŸæ­£å®ç°å…¨æ ˆå¼€å‘ã€‚

#### åˆ›å»ºAPIæ¥å£(route.ts)

åœ¨App Routerä¸­ï¼ŒAPIè·¯ç”±çš„æ–‡ä»¶å¿…é¡»å‘½åä¸º`route.ts`æˆ–`route.js`ï¼š

```
app/api/chat/route.ts        â†’ /api/chat
app/api/chat/sessions/route.ts â†’ /api/chat/sessions
```

#### å¤„ç†POSTè¯·æ±‚ - èŠå¤©æ¥å£å®ç°

è®©æˆ‘ä»¬åˆ›å»ºèŠå¤©APIï¼Œè¿™æ˜¯æˆ‘ä»¬AIåº”ç”¨çš„æ ¸å¿ƒï¼š

```typescript
// app/api/chat/route.ts
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  try {
    // 1. è·å–è¯·æ±‚æ•°æ®
    const { message, thread_id } = await request.json()
    
    // 2. å‚æ•°éªŒè¯
    if (!message || !thread_id) {
      return NextResponse.json(
        { error: 'æ¶ˆæ¯å†…å®¹å’Œä¼šè¯IDä¸èƒ½ä¸ºç©º' }, 
        { status: 400 }
      )
    }
    
    // 3. è°ƒç”¨AIæœåŠ¡ï¼ˆè¿™é‡Œæš‚æ—¶è¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼‰
    const aiResponse = await processAIMessage(message, thread_id)
    
    // 4. è¿”å›å“åº”
    return NextResponse.json({
      success: true,
      response: aiResponse
    })
    
  } catch (error) {
    console.error('APIé”™è¯¯:', error)
    return NextResponse.json(
      { error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' }, 
      { status: 500 }
    )
  }
}

// æ¨¡æ‹ŸAIå¤„ç†å‡½æ•°
async function processAIMessage(message: string, threadId: string) {
  // è¿™é‡Œå°†åœ¨ç¬¬5ç« é›†æˆçœŸæ­£çš„LangGraphJS
  return `æ”¶åˆ°æ‚¨çš„æ¶ˆæ¯ï¼š"${message}"ï¼Œä¼šè¯IDï¼š${threadId}`
}
```

#### å¤„ç†GETè¯·æ±‚ - å†å²è®°å½•è·å–

```typescript
// app/api/chat/route.ts (æ·»åŠ GETæ–¹æ³•)
export async function GET(request: NextRequest) {
  try {
    // 1. è·å–æŸ¥è¯¢å‚æ•°
    const { searchParams } = new URL(request.url)
    const threadId = searchParams.get('thread_id')
    
    if (!threadId) {
      return NextResponse.json(
        { error: 'ä¼šè¯IDä¸èƒ½ä¸ºç©º' }, 
        { status: 400 }
      )
    }
    
    // 2. è·å–å†å²è®°å½•ï¼ˆè¿™é‡Œè¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼‰
    const history = await getChatHistory(threadId)
    
    // 3. è¿”å›æ•°æ®
    return NextResponse.json({
      threadId,
      history
    })
    
  } catch (error) {
    console.error('è·å–å†å²è®°å½•é”™è¯¯:', error)
    return NextResponse.json(
      { error: 'è·å–å†å²è®°å½•å¤±è´¥' }, 
      { status: 500 }
    )
  }
}

// æ¨¡æ‹Ÿè·å–å†å²è®°å½•
async function getChatHistory(threadId: string) {
  return [
    {
      id: '1',
      content: 'ä½ å¥½ï¼',
      role: 'user',
      timestamp: new Date()
    },
    {
      id: '2',
      content: 'æ‚¨å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼',
      role: 'assistant',
      timestamp: new Date()
    }
  ]
}
```

#### æµå¼å“åº”å®ç° - AIåº”ç”¨çš„å…³é”®ç‰¹æ€§

æµå¼å“åº”è®©AIçš„å›ç­”èƒ½å¤Ÿåƒæ‰“å­—ä¸€æ ·é€å­—å‡ºç°ï¼Œå¤§å¤§æå‡ç”¨æˆ·ä½“éªŒï¼š

```typescript
// app/api/chat/route.ts (æµå¼ç‰ˆæœ¬)
export async function POST(request: NextRequest) {
  const { message, thread_id } = await request.json()
  
  // åˆ›å»ºæµå¼å“åº”
  const stream = new ReadableStream({
    async start(controller) {
      try {
        // æ¨¡æ‹ŸAIé€å­—ç”Ÿæˆå“åº”
        const response = `è¿™æ˜¯å¯¹"${message}"çš„AIå›ç­”ï¼Œæˆ‘ä¼šé€å­—æ˜¾ç¤ºç»™æ‚¨...`
        
        for (let i = 0; i < response.length; i++) {
          const chunk = {
            type: 'chunk',
            content: response[i]
          }
          
          // å‘é€æ•°æ®å—
          controller.enqueue(
            new TextEncoder().encode(JSON.stringify(chunk) + '\n')
          )
          
          // æ¨¡æ‹Ÿæ‰“å­—å»¶è¿Ÿ
          await new Promise(resolve => setTimeout(resolve, 50))
        }
        
        // å‘é€ç»“æŸä¿¡å·
        controller.enqueue(
          new TextEncoder().encode(JSON.stringify({ type: 'end' }) + '\n')
        )
        
        controller.close()
        
      } catch (error) {
        controller.error(error)
      }
    }
  })
  
  return new Response(stream, {
    headers: {
      'Content-Type': 'text/plain; charset=utf-8',
      'Cache-Control': 'no-cache',
    }
  })
}
```

### ç¬¬å››éƒ¨åˆ†ï¼šç»„ä»¶ç»„ç»‡æ–¹å¼ ğŸ“‚

éšç€åº”ç”¨çš„å¤æ‚åº¦å¢åŠ ï¼Œåˆç†çš„ç»„ä»¶ç»„ç»‡å˜å¾—éå¸¸é‡è¦ã€‚è®©æˆ‘ä»¬çœ‹çœ‹åœ¨Next.jsä¸­å¦‚ä½•ä¼˜é›…åœ°ç»„ç»‡ç»„ä»¶ï¼š

#### ç»„ä»¶ç›®å½•ç»“æ„

```
app/
â”œâ”€â”€ components/          # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ ChatMessage.tsx  # æ¶ˆæ¯ç»„ä»¶
â”‚   â”œâ”€â”€ MessageInput.tsx # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â””â”€â”€ SessionSidebar.tsx # ä¾§è¾¹æ ç»„ä»¶
â”œâ”€â”€ (chat)/             # è·¯ç”±åˆ†ç»„ï¼ˆä¸å½±å“URLï¼‰
â”‚   â”œâ”€â”€ components/     # èŠå¤©åŠŸèƒ½ä¸“ç”¨ç»„ä»¶
â”‚   â””â”€â”€ hooks/          # è‡ªå®šä¹‰Hook
â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
    â”œâ”€â”€ api.ts          # APIè°ƒç”¨å°è£…
    â””â”€â”€ constants.ts    # å¸¸é‡å®šä¹‰
```

#### å…±äº«ç»„ä»¶è®¾è®¡

```tsx
// app/components/ChatMessage.tsx
interface ChatMessageProps {
  message: {
    id: string
    content: string
    role: 'user' | 'assistant'
    timestamp: Date
    isStreaming?: boolean
  }
}

export default function ChatMessage({ message }: ChatMessageProps) {
  return (
    <div className={`flex gap-4 ${message.role === 'user' ? 'flex-row-reverse' : 'flex-row'}`}>
      {/* å¤´åƒ */}
      <div className="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500">
        {/* å¤´åƒå†…å®¹ */}
      </div>
      
      {/* æ¶ˆæ¯å†…å®¹ */}
      <div className="max-w-[75%]">
        <div className="p-4 rounded-2xl bg-white/10 backdrop-blur-sm">
          <p>{message.content}</p>
          {message.isStreaming && (
            <span className="typing-cursor">|</span>
          )}
        </div>
        <div className="text-xs text-gray-400 mt-1">
          {message.timestamp.toLocaleTimeString()}
        </div>
      </div>
    </div>
  )
}
```

---

## ğŸ’» ä»£ç å®æˆ˜æ¼”ç¤º

ç°åœ¨è®©æˆ‘ä»¬é€šè¿‡å®é™…ä»£ç æ¥æ¼”ç¤ºNext.jsçš„å¼ºå¤§åŠŸèƒ½ï¼æˆ‘å°†å¸¦ä½ ä¸€æ­¥æ­¥æ„å»ºæˆ‘ä»¬çš„AIèŠå¤©åº”ç”¨ã€‚

### å®æˆ˜ä»»åŠ¡1ï¼šæ„å»ºå®Œæ•´çš„èŠå¤©é¡µé¢

è®©æˆ‘ä»¬ä»main pageå¼€å§‹ï¼Œè¿™æ˜¯ç”¨æˆ·çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªç•Œé¢ï¼š

```tsx
// app/page.tsx - å®Œæ•´çš„èŠå¤©åº”ç”¨ä¸»é¡µ
'use client'

import { useState, useRef, useEffect } from 'react'
import { Send, Bot, User, Sparkles, MessageCircle, Zap } from 'lucide-react'

// æ¶ˆæ¯æ¥å£å®šä¹‰
interface Message {
  id: string
  content: string
  role: 'user' | 'assistant'
  timestamp: Date
  isStreaming?: boolean
}

export default function ChatPage() {
  // çŠ¶æ€ç®¡ç†
  const [messages, setMessages] = useState<Message[]>([
    {
      id: '1',
      content: 'ä½ å¥½ï¼æˆ‘æ˜¯ç”± LangGraphJS é©±åŠ¨çš„ AI åŠ©æ‰‹ã€‚âœ¨ æˆ‘å¯ä»¥å¸®åŠ©ä½ è§£ç­”é—®é¢˜ã€æä¾›å»ºè®®æˆ–è€…è¿›è¡Œæœ‰è¶£çš„å¯¹è¯ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ',
      role: 'assistant',
      timestamp: new Date()
    }
  ])
  const [input, setInput] = useState('')
  const [isLoading, setIsLoading] = useState(false)
  
  // DOMå¼•ç”¨
  const messagesEndRef = useRef<HTMLDivElement>(null)
  const textareaRef = useRef<HTMLTextAreaElement>(null)

  // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
  }

  useEffect(() => {
    scrollToBottom()
  }, [messages])

  // å‘é€æ¶ˆæ¯å‡½æ•°
  const sendMessage = async () => {
    if (!input.trim() || isLoading) return

    // åˆ›å»ºç”¨æˆ·æ¶ˆæ¯
    const userMessage: Message = {
      id: Date.now().toString(),
      content: input.trim(),
      role: 'user',
      timestamp: new Date()
    }

    setMessages(prev => [...prev, userMessage])
    setInput('')
    setIsLoading(true)

    try {
      // è°ƒç”¨æˆ‘ä»¬çš„APIæ¥å£
      const response = await fetch('/api/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ 
          message: input.trim(), 
          thread_id: 'demo-session-1' 
        })
      })

      if (!response.ok) {
        throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥')
      }

      // å¤„ç†æµå¼å“åº”
      const assistantMessageId = (Date.now() + 1).toString()
      const assistantMessage: Message = {
        id: assistantMessageId,
        content: '',
        role: 'assistant',
        timestamp: new Date(),
        isStreaming: true
      }

      setMessages(prev => [...prev, assistantMessage])

      // è¯»å–æµå¼æ•°æ®
      const reader = response.body?.getReader()
      if (!reader) throw new Error('æ— æ³•è¯»å–å“åº”æµ')

      const decoder = new TextDecoder()
      let buffer = ''

      while (true) {
        const { done, value } = await reader.read()
        if (done) break

        buffer += decoder.decode(value, { stream: true })
        const lines = buffer.split('\n')
        buffer = lines.pop() || ''

        for (const line of lines) {
          if (line.trim()) {
            try {
              const data = JSON.parse(line)
              
              if (data.type === 'chunk' && data.content) {
                setMessages(prev => prev.map(msg =>
                  msg.id === assistantMessageId
                    ? { ...msg, content: msg.content + data.content }
                    : msg
                ))
              } else if (data.type === 'end') {
                setMessages(prev => prev.map(msg =>
                  msg.id === assistantMessageId
                    ? { ...msg, isStreaming: false }
                    : msg
                ))
                break
              }
            } catch (parseError) {
              console.error('è§£ææµæ•°æ®é”™è¯¯:', parseError)
            }
          }
        }
      }

    } catch (error) {
      console.error('å‘é€æ¶ˆæ¯æ—¶å‡ºé”™:', error)
      const errorMessage: Message = {
        id: (Date.now() + 1).toString(),
        content: 'æŠ±æ­‰ï¼Œå‘é€æ¶ˆæ¯æ—¶å‡ºç°é”™è¯¯ã€‚è¯·ç¨åé‡è¯•ã€‚',
        role: 'assistant',
        timestamp: new Date()
      }
      setMessages(prev => [...prev, errorMessage])
    } finally {
      setIsLoading(false)
    }
  }

  // é”®ç›˜äº‹ä»¶å¤„ç†
  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault()
      sendMessage()
    }
  }

  return (
    <div className="h-screen flex flex-col bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden">
      {/* å¤´éƒ¨ */}
      <header className="backdrop-blur-md bg-white/10 border-b border-white/20 p-4">
        <div className="max-w-4xl mx-auto flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 bg-gradient-to-br from-purple-400 to-cyan-400 rounded-xl flex items-center justify-center">
              <Sparkles className="h-5 w-5 text-white" />
            </div>
            <div>
              <h1 className="text-xl font-bold text-white">LangGraph AI åŠ©æ‰‹</h1>
              <p className="text-purple-200 text-xs">æ™ºèƒ½å¯¹è¯ â€¢ å®æ—¶å“åº”</p>
            </div>
          </div>
        </div>
      </header>

      {/* èŠå¤©åŒºåŸŸ */}
      <div className="flex-1 max-w-4xl mx-auto w-full flex flex-col p-4">
        {/* æ¶ˆæ¯åˆ—è¡¨ */}
        <div className="flex-1 backdrop-blur-md bg-white/5 rounded-3xl border border-white/20 overflow-hidden mb-4">
          <div className="h-full overflow-y-auto p-6 space-y-4">
            {messages.map((message) => (
              <div
                key={message.id}
                className={`flex gap-4 ${message.role === 'user' ? 'flex-row-reverse' : 'flex-row'}`}
              >
                {/* å¤´åƒ */}
                <div className="flex-shrink-0">
                  <div className={`w-10 h-10 rounded-2xl flex items-center justify-center ${
                    message.role === 'user'
                      ? 'bg-gradient-to-br from-blue-500 to-cyan-500'
                      : 'bg-gradient-to-br from-purple-500 to-pink-500'
                  }`}>
                    {message.role === 'user' ? (
                      <User className="h-5 w-5 text-white" />
                    ) : (
                      <Bot className="h-5 w-5 text-white" />
                    )}
                  </div>
                </div>

                {/* æ¶ˆæ¯å†…å®¹ */}
                <div className="max-w-[75%]">
                  <div className={`p-4 rounded-2xl backdrop-blur-sm border ${
                    message.role === 'user'
                      ? 'bg-gradient-to-br from-blue-500/90 to-cyan-500/90 text-white border-white/20'
                      : 'bg-white/10 text-white border-white/20'
                  }`}>
                    <p className="text-sm leading-relaxed whitespace-pre-wrap">
                      {message.content}
                    </p>
                    
                    {/* æµå¼æ‰“å­—å…‰æ ‡ */}
                    {message.isStreaming && (
                      <span className="inline-block w-2 h-5 bg-white ml-1 animate-pulse"></span>
                    )}
                  </div>
                  
                  <div className="mt-2 text-xs text-purple-200">
                    {message.timestamp.toLocaleTimeString('zh-CN', {
                      hour: '2-digit',
                      minute: '2-digit'
                    })}
                  </div>
                </div>
              </div>
            ))}

            {/* åŠ è½½åŠ¨ç”» */}
            {isLoading && (
              <div className="flex gap-4">
                <div className="w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center">
                  <Bot className="h-5 w-5 text-white" />
                </div>
                <div className="bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-4">
                  <div className="flex items-center gap-2">
                    <div className="flex space-x-1">
                      <div className="w-2 h-2 bg-purple-400 rounded-full animate-bounce"></div>
                      <div className="w-2 h-2 bg-cyan-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                      <div className="w-2 h-2 bg-pink-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                    </div>
                    <span className="text-purple-200 text-xs">AI æ­£åœ¨æ€è€ƒ...</span>
                  </div>
                </div>
              </div>
            )}

            <div ref={messagesEndRef} />
          </div>
        </div>

        {/* è¾“å…¥åŒºåŸŸ */}
        <div className="backdrop-blur-md bg-white/10 rounded-2xl border border-white/20 p-4">
          <div className="flex items-end gap-4">
            <div className="flex-1">
              <textarea
                ref={textareaRef}
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯... (æ”¯æŒ Shift+Enter æ¢è¡Œ)"
                className="w-full bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-purple-200 resize-none focus:outline-none focus:ring-2 focus:ring-purple-400 backdrop-blur-sm"
                rows={1}
                disabled={isLoading}
              />
            </div>

            <button
              onClick={sendMessage}
              disabled={!input.trim() || isLoading}
              className="p-3 bg-gradient-to-r from-purple-500 to-cyan-500 text-white rounded-xl hover:from-purple-600 hover:to-cyan-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
            >
              <Send className="h-5 w-5" />
            </button>
          </div>

          <div className="flex items-center justify-between mt-3 text-xs text-purple-200">
            <div className="flex items-center gap-2">
              <MessageCircle className="h-3 w-3" />
              <span>æŒ‰ Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ</span>
            </div>
            <div className="flex items-center gap-1">
              <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
              <span>å®æ—¶è¿æ¥</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
```

### å®æˆ˜ä»»åŠ¡2ï¼šåˆ›å»ºå¸ƒå±€ç»„ä»¶

```tsx
// app/layout.tsx - åº”ç”¨æ ¹å¸ƒå±€
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "LangGraph AI èŠå¤©åº”ç”¨",
  description: "åŸºäº LangGraphJS æ„å»ºçš„æ™ºèƒ½èŠå¤©åº”ç”¨",
  keywords: ["AI", "èŠå¤©", "LangGraph", "Next.js"],
  authors: [{ name: "LangGraph Team" }],
  viewport: "width=device-width, initial-scale=1",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="zh-CN">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        {/* å…¨å±€æ ·å¼å’Œé…ç½® */}
        <style jsx global>{`
          /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
          .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
          }
          .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
          }
          .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
          }
          .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
          }

          /* æ‰“å­—æœºå…‰æ ‡åŠ¨ç”» */
          .typing-cursor {
            animation: blink 1s infinite;
          }
          @keyframes blink {
            50% { opacity: 0; }
          }

          /* æ·¡å…¥åŠ¨ç”» */
          @keyframes fadeIn {
            from {
              opacity: 0;
              transform: translateY(10px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
        `}</style>
        
        {children}
      </body>
    </html>
  );
}
```

### å®æˆ˜ä»»åŠ¡3ï¼šåˆ›å»ºAPIè·¯ç”±

```typescript
// app/api/chat/route.ts - èŠå¤©APIå®ç°
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  try {
    const { message, thread_id } = await request.json()
    
    // å‚æ•°éªŒè¯
    if (!message || !thread_id) {
      return NextResponse.json(
        { error: 'æ¶ˆæ¯å†…å®¹å’Œä¼šè¯IDä¸èƒ½ä¸ºç©º' }, 
        { status: 400 }
      )
    }

    // åˆ›å»ºæµå¼å“åº”
    const stream = new ReadableStream({
      async start(controller) {
        try {
          // æ¨¡æ‹ŸAIé€å­—ç”Ÿæˆå“åº”
          const responses = [
            "æ„Ÿè°¢æ‚¨çš„æ¶ˆæ¯ï¼",
            "æˆ‘æ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚ï¼š",
            `"${message}"`,
            "\n\nè¿™æ˜¯ä¸€ä¸ªåŸºäº Next.js API Routes çš„å“åº”ã€‚",
            "åœ¨ç¬¬5ç« ä¸­ï¼Œæˆ‘ä»¬å°†é›†æˆçœŸæ­£çš„ LangGraphJS AI åŠŸèƒ½ï¼",
            "\n\nç›®å‰è¿™æ˜¯æ¼”ç¤ºæ¨¡å¼ï¼Œå±•ç¤ºæµå¼å“åº”çš„æ•ˆæœã€‚"
          ]
          
          for (const response of responses) {
            for (let i = 0; i < response.length; i++) {
              const chunk = {
                type: 'chunk',
                content: response[i]
              }
              
              controller.enqueue(
                new TextEncoder().encode(JSON.stringify(chunk) + '\n')
              )
              
              // æ¨¡æ‹Ÿæ‰“å­—å»¶è¿Ÿ
              await new Promise(resolve => setTimeout(resolve, 30))
            }
            
            // æ¯ä¸ªå¥å­åç¨ä½œåœé¡¿
            await new Promise(resolve => setTimeout(resolve, 200))
          }
          
          // å‘é€ç»“æŸä¿¡å·
          controller.enqueue(
            new TextEncoder().encode(JSON.stringify({ type: 'end' }) + '\n')
          )
          
          controller.close()
          
        } catch (error) {
          console.error('æµå¼å“åº”é”™è¯¯:', error)
          controller.error(error)
        }
      }
    })
    
    return new Response(stream, {
      headers: {
        'Content-Type': 'text/plain; charset=utf-8',
        'Cache-Control': 'no-cache',
        'Connection': 'keep-alive',
      }
    })
    
  } catch (error) {
    console.error('APIé”™è¯¯:', error)
    return NextResponse.json(
      { error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' }, 
      { status: 500 }
    )
  }
}

export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url)
    const threadId = searchParams.get('thread_id')
    
    if (!threadId) {
      return NextResponse.json(
        { error: 'ä¼šè¯IDä¸èƒ½ä¸ºç©º' }, 
        { status: 400 }
      )
    }
    
    // è¿”å›æ¨¡æ‹Ÿçš„å†å²è®°å½•
    const history = [
      {
        id: 'welcome',
        kwargs: {
          content: 'ä½ å¥½ï¼æˆ‘æ˜¯ç”± LangGraphJS é©±åŠ¨çš„ AI åŠ©æ‰‹ã€‚âœ¨'
        },
        id: ['AIMessage', 'welcome']
      }
    ]
    
    return NextResponse.json({
      thread_id: threadId,
      history
    })
    
  } catch (error) {
    console.error('è·å–å†å²è®°å½•é”™è¯¯:', error)
    return NextResponse.json(
      { error: 'è·å–å†å²è®°å½•å¤±è´¥' }, 
      { status: 500 }
    )
  }
}
```

---

## ğŸ”§ å®è·µæŒ‡å¯¼

ç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·æ¥è¿è¡Œå’Œæµ‹è¯•æˆ‘ä»¬çš„Next.jsåº”ç”¨ï¼

### è¿è¡Œå’Œæµ‹è¯•æ–¹æ³•

#### æ­¥éª¤1ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd langgraph-chat-app

# å¯åŠ¨Next.jså¼€å‘æœåŠ¡å™¨
pnpm dev
```

ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š
```
â–² Next.js 15.0.0
- Local:        http://localhost:3000
- Environments: .env.local

âœ“ Starting...
âœ“ Ready in 2.3s
```

#### æ­¥éª¤2ï¼šåœ¨æµè§ˆå™¨ä¸­æµ‹è¯•

1. **æ‰“å¼€ä¸»é¡µ**ï¼šè®¿é—® `http://localhost:3000`
2. **æµ‹è¯•èŠå¤©åŠŸèƒ½**ï¼š
   - åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯ï¼Œæ¯”å¦‚"ä½ å¥½"
   - æŒ‰Enteré”®å‘é€
   - è§‚å¯Ÿæµå¼å“åº”æ•ˆæœ
3. **æµ‹è¯•APIæ¥å£**ï¼š
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)
   - æŸ¥çœ‹Networkæ ‡ç­¾ï¼Œè§‚å¯ŸAPIè°ƒç”¨

#### æ­¥éª¤3ï¼šéªŒè¯åŠŸèƒ½ç‰¹æ€§

**éªŒè¯App RouteråŠŸèƒ½**ï¼š
- âœ… é¡µé¢æ­£å¸¸åŠ è½½
- âœ… è·¯ç”±åˆ‡æ¢æ­£å¸¸
- âœ… å¸ƒå±€åº”ç”¨æ­£ç¡®

**éªŒè¯ç»„ä»¶ç±»å‹**ï¼š
- âœ… å®¢æˆ·ç«¯ç»„ä»¶çš„äº¤äº’åŠŸèƒ½æ­£å¸¸ï¼ˆè¾“å…¥ã€ç‚¹å‡»ã€çŠ¶æ€æ›´æ–°ï¼‰
- âœ… æœåŠ¡ç«¯ç»„ä»¶çš„é™æ€å†…å®¹æ­£ç¡®æ˜¾ç¤º

**éªŒè¯API Routes**ï¼š
- âœ… POSTè¯·æ±‚æˆåŠŸå‘é€å’Œæ¥æ”¶
- âœ… æµå¼å“åº”æ­£å¸¸å·¥ä½œ
- âœ… é”™è¯¯å¤„ç†æ­£ç¡®

### å®é™…æ“ä½œçš„å…·ä½“æ­¥éª¤

è®©æˆ‘é™ªä½ ä¸€æ­¥æ­¥éªŒè¯æ¯ä¸ªåŠŸèƒ½ï¼š

#### æµ‹è¯•1ï¼šéªŒè¯å®¢æˆ·ç«¯ç»„ä»¶äº¤äº’

```
1. åœ¨èŠå¤©è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡å­—
   â†’ åº”è¯¥çœ‹åˆ°è¾“å…¥æ¡†å†…å®¹å®æ—¶æ›´æ–°

2. æŒ‰Enteré”®å‘é€æ¶ˆæ¯
   â†’ åº”è¯¥çœ‹åˆ°ï¼š
     - ç”¨æˆ·æ¶ˆæ¯ç«‹å³å‡ºç°åœ¨å³ä¾§
     - AIæ¶ˆæ¯åœ¨å·¦ä¾§é€å­—æ˜¾ç¤ºï¼ˆæµå¼æ•ˆæœï¼‰
     - å‘é€æŒ‰é’®åœ¨å¤„ç†æœŸé—´å˜ä¸ºç¦ç”¨çŠ¶æ€

3. è§‚å¯ŸçŠ¶æ€å˜åŒ–
   â†’ åº”è¯¥çœ‹åˆ°ï¼š
     - isLoadingçŠ¶æ€æ­£ç¡®åˆ‡æ¢
     - æ¶ˆæ¯åˆ—è¡¨å®æ—¶æ›´æ–°
     - è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
```

#### æµ‹è¯•2ï¼šéªŒè¯API Routes

```
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Networkæ ‡ç­¾

1. å‘é€ä¸€æ¡æ¶ˆæ¯
   â†’ åº”è¯¥çœ‹åˆ°ï¼š
     - POST /api/chat è¯·æ±‚
     - å“åº”ç±»å‹ä¸º text/plain
     - æµå¼æ•°æ®é€æ­¥æ¥æ”¶

2. æ£€æŸ¥è¯·æ±‚å†…å®¹
   â†’ åº”è¯¥åŒ…å«ï¼š
     - message: "ç”¨æˆ·è¾“å…¥çš„å†…å®¹"
     - thread_id: "demo-session-1"

3. æ£€æŸ¥å“åº”å†…å®¹
   â†’ åº”è¯¥çœ‹åˆ°ï¼š
     - JSONæ ¼å¼çš„æ•°æ®å—
     - type: 'chunk' å’Œ content å­—æ®µ
     - æœ€åçš„ type: 'end' ä¿¡å·
```

#### æµ‹è¯•3ï¼šéªŒè¯é”™è¯¯å¤„ç†

```
æµ‹è¯•ç½‘ç»œé”™è¯¯ï¼š
1. æ–­å¼€ç½‘ç»œè¿æ¥
2. å°è¯•å‘é€æ¶ˆæ¯
   â†’ åº”è¯¥çœ‹åˆ°é”™è¯¯æç¤ºæ¶ˆæ¯

æµ‹è¯•æ— æ•ˆè¾“å…¥ï¼š
1. å‘é€ç©ºæ¶ˆæ¯
   â†’ åº”è¯¥æ— æ³•å‘é€

æµ‹è¯•APIé”™è¯¯ï¼š
1. ä¿®æ”¹APIä»£ç åˆ¶é€ é”™è¯¯
2. è§‚å¯Ÿé”™è¯¯å¤„ç†æ˜¯å¦æ­£ç¡®
```

### é—®é¢˜è§£å†³çš„æ–¹æ³•æŒ‡å¯¼

#### å¸¸è§é—®é¢˜1ï¼šé¡µé¢æ— æ³•åŠ è½½

**å¯èƒ½åŸå› **ï¼š
- ç«¯å£è¢«å ç”¨
- ä¾èµ–å®‰è£…ä¸å®Œæ•´
- é…ç½®æ–‡ä»¶é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr 3000

# é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules
rm pnpm-lock.yaml
pnpm install

# ä½¿ç”¨å…¶ä»–ç«¯å£
pnpm dev -p 3001
```

#### å¸¸è§é—®é¢˜2ï¼šAPIè°ƒç”¨å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- APIè·¯ç”±æ–‡ä»¶ä½ç½®é”™è¯¯
- è¯·æ±‚æ ¼å¼ä¸æ­£ç¡®
- CORSé—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶ç»“æ„
ls -la app/api/chat/

# ç¡®è®¤route.tsæ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
cat app/api/chat/route.ts

# æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
# æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
```

#### å¸¸è§é—®é¢˜3ï¼šæµå¼å“åº”ä¸å·¥ä½œ

**å¯èƒ½åŸå› **ï¼š
- æµå¼å“åº”æ ¼å¼é”™è¯¯
- å‰ç«¯è§£ææœ‰é—®é¢˜
- ç¼“å­˜è®¾ç½®ä¸å½“

**è§£å†³æ–¹æ³•**ï¼š
```typescript
// ç¡®è®¤APIå“åº”å¤´è®¾ç½®æ­£ç¡®
return new Response(stream, {
  headers: {
    'Content-Type': 'text/plain; charset=utf-8',
    'Cache-Control': 'no-cache',
    'Connection': 'keep-alive',
  }
})

// ç¡®è®¤å‰ç«¯è§£æé€»è¾‘æ­£ç¡®
const reader = response.body?.getReader()
const decoder = new TextDecoder()
// ... æµå¼è§£æä»£ç 
```

### é¼“åŠ±å­¦å‘˜åŠ¨æ‰‹å®è·µçš„è¯æœ¯

åŒå­¦ä»¬ï¼Œç°åœ¨æ˜¯æœ€æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ï¼ä½ ä»¬å³å°†äº²æ‰‹è¿è¡Œç¬¬ä¸€ä¸ªçœŸæ­£çš„Next.js AIåº”ç”¨ï¼

**ä¸è¦å®³æ€•å‡ºé”™**ï¼š
- æ¯ä¸ªé”™è¯¯éƒ½æ˜¯å­¦ä¹ çš„æœºä¼š
- è°ƒè¯•è¿‡ç¨‹æœ¬èº«å°±æ˜¯æˆé•¿çš„è¿‡ç¨‹
- æˆ‘ä»¬çš„ç¤ºä¾‹ä»£ç ç»è¿‡å……åˆ†æµ‹è¯•ï¼ŒæŒ‰æ­¥éª¤æ“ä½œä¸€å®šèƒ½æˆåŠŸ

**ç§¯æå°è¯•å˜åŒ–**ï¼š
- ä¿®æ”¹æ¶ˆæ¯å†…å®¹ï¼Œçœ‹çœ‹AIå¦‚ä½•å“åº”
- è°ƒæ•´æ ·å¼é¢œè‰²ï¼Œä¸ªæ€§åŒ–ä½ çš„åº”ç”¨
- å°è¯•æ·»åŠ æ–°çš„åŠŸèƒ½ç‰¹æ€§

**è®°å½•ä½ çš„å‘ç°**ï¼š
- å“ªäº›åœ°æ–¹è®©ä½ å°è±¡æ·±åˆ»ï¼Ÿ
- é‡åˆ°äº†ä»€ä¹ˆæœ‰è¶£çš„é—®é¢˜ï¼Ÿ
- æœ‰ä»€ä¹ˆæ”¹è¿›çš„æƒ³æ³•ï¼Ÿ

è®°ä½ï¼Œç¼–ç¨‹æœ€å¤§çš„ä¹è¶£å°±åœ¨äºåˆ›é€ å’Œæ¢ç´¢ã€‚æ¯ä¸€è¡Œä»£ç éƒ½æ˜¯ä½ åˆ›é€ åŠ›çš„ä½“ç°ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½æ˜¯ä½ æŠ€èƒ½çš„è¯æ˜ï¼

---

## ğŸ“‹ çŸ¥è¯†ç‚¹æ€»ç»“å›é¡¾

### æœ¬èŠ‚è¯¾æ ¸å¿ƒæ¦‚å¿µæ¸…å•

è®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä»Šå¤©å­¦åˆ°çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š

#### ğŸ—ï¸ App Routeræ¶æ„æ ¸å¿ƒè¦ç‚¹

**æ–‡ä»¶ç³»ç»Ÿè·¯ç”±**ï¼š
- âœ… `page.tsx` - å®šä¹‰è·¯ç”±é¡µé¢
- âœ… `layout.tsx` - å®šä¹‰é¡µé¢å¸ƒå±€
- âœ… `route.ts` - å®šä¹‰APIæ¥å£
- âœ… ç›®å½•ç»“æ„å³è·¯ç”±ç»“æ„

**å¸ƒå±€ç³»ç»Ÿ**ï¼š
- âœ… æ ¹å¸ƒå±€(RootLayout) - åº”ç”¨çº§åˆ«çš„åŒ…è£…
- âœ… åµŒå¥—å¸ƒå±€ - æ”¯æŒå¤šå±‚çº§å¸ƒå±€åµŒå¥—
- âœ… å¸ƒå±€æŒä¹…åŒ– - è·¯ç”±åˆ‡æ¢æ—¶å¸ƒå±€ä¿æŒä¸å˜
- âœ… å…ƒæ•°æ®ç®¡ç† - SEOå’Œé¡µé¢ä¿¡æ¯é…ç½®

#### âš¡ ç»„ä»¶ç±»å‹ç­–ç•¥é‡ç‚¹

**æœåŠ¡ç«¯ç»„ä»¶(é»˜è®¤)**ï¼š
- âœ… æ›´å¿«çš„é¦–å±åŠ è½½
- âœ… æ›´å¥½çš„SEOè¡¨ç°
- âœ… ç›´æ¥è®¿é—®æœåŠ¡ç«¯èµ„æº
- âœ… é€‚ç”¨äºé™æ€å†…å®¹å’Œæ•°æ®å±•ç¤º

**å®¢æˆ·ç«¯ç»„ä»¶('use client')**ï¼š
- âœ… æ”¯æŒäº¤äº’å’ŒçŠ¶æ€ç®¡ç†
- âœ… è®¿é—®æµè§ˆå™¨API
- âœ… äº‹ä»¶å¤„ç†å’Œç”¨æˆ·äº¤äº’
- âœ… é€‚ç”¨äºåŠ¨æ€äº¤äº’åŠŸèƒ½

**é€‰æ‹©ç­–ç•¥**ï¼š
- â“ éœ€è¦äº¤äº’ï¼Ÿâ†’ å®¢æˆ·ç«¯ç»„ä»¶
- â“ çº¯å±•ç¤ºå†…å®¹ï¼Ÿâ†’ æœåŠ¡ç«¯ç»„ä»¶
- â“ éœ€è¦å®æ—¶æ›´æ–°ï¼Ÿâ†’ å®¢æˆ·ç«¯ç»„ä»¶
- â“ SEOé‡è¦ï¼Ÿâ†’ æœåŠ¡ç«¯ç»„ä»¶

#### ğŸ”Œ API Routeså®ç°è¦ç‚¹

**è·¯ç”±æ–‡ä»¶å‘½å**ï¼š
- âœ… å¿…é¡»å‘½åä¸º `route.ts` æˆ– `route.js`
- âœ… æ”¯æŒ GETã€POSTã€PUTã€DELETE ç­‰HTTPæ–¹æ³•
- âœ… è·¯å¾„ç»“æ„å¯¹åº”URLç»“æ„

**è¯·æ±‚å¤„ç†æ¨¡å¼**ï¼š
```typescript
// æ ‡å‡†æ¨¡å¼
export async function POST(request: NextRequest) {
  const data = await request.json()
  return NextResponse.json(response)
}

// æµå¼å“åº”æ¨¡å¼
export async function POST(request: NextRequest) {
  const stream = new ReadableStream({...})
  return new Response(stream)
}
```

**é”™è¯¯å¤„ç†æœ€ä½³å®è·µ**ï¼š
- âœ… å‚æ•°éªŒè¯
- âœ… try-catchåŒ…è£…
- âœ… åˆé€‚çš„HTTPçŠ¶æ€ç 
- âœ… ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯

#### ğŸ“‚ ç»„ä»¶ç»„ç»‡æœ€ä½³å®è·µ

**ç›®å½•ç»“æ„è®¾è®¡**ï¼š
```
app/
â”œâ”€â”€ components/     # å…±äº«ç»„ä»¶
â”œâ”€â”€ (groups)/       # è·¯ç”±åˆ†ç»„
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â””â”€â”€ api/           # APIè·¯ç”±
```

**ç»„ä»¶è®¾è®¡åŸåˆ™**ï¼š
- âœ… å•ä¸€èŒè´£ - æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- âœ… å¯é‡ç”¨æ€§ - ç»„ä»¶èƒ½åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨
- âœ… Propsç±»å‹åŒ– - ä½¿ç”¨TypeScriptå®šä¹‰æ¥å£
- âœ… åˆç†æ‹†åˆ† - é¿å…ç»„ä»¶è¿‡å¤§è¿‡å¤æ‚

### é‡è¦APIå’Œæ–¹æ³•å›é¡¾

#### Next.jsæ ¸å¿ƒAPI

**è·¯ç”±API**ï¼š
```typescript
// é¡µé¢ç»„ä»¶
export default function Page() { ... }

// å¸ƒå±€ç»„ä»¶
export default function Layout({ children }) { ... }

// APIå¤„ç†å‡½æ•°
export async function GET(request: NextRequest) { ... }
export async function POST(request: NextRequest) { ... }
```

**å…ƒæ•°æ®API**ï¼š
```typescript
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'é¡µé¢æ ‡é¢˜',
  description: 'é¡µé¢æè¿°',
}
```

**è¯·æ±‚å’Œå“åº”API**ï¼š
```typescript
// è·å–è¯·æ±‚æ•°æ®
const { searchParams } = new URL(request.url)
const body = await request.json()

// è¿”å›å“åº”
return NextResponse.json(data)
return new Response(stream)
```

#### Reactæ ¸å¿ƒHook

**çŠ¶æ€ç®¡ç†Hook**ï¼š
```typescript
const [state, setState] = useState(initialValue)
const [loading, setLoading] = useState(false)
```

**å‰¯ä½œç”¨Hook**ï¼š
```typescript
useEffect(() => {
  // å‰¯ä½œç”¨é€»è¾‘
  return () => {
    // æ¸…ç†é€»è¾‘
  }
}, [dependencies])
```

**å¼•ç”¨Hook**ï¼š
```typescript
const ref = useRef<HTMLElement>(null)
const messagesEndRef = useRef<HTMLDivElement>(null)
```

### å…³é”®é…ç½®å’Œå‚æ•°

#### Next.jsé…ç½®è¦ç‚¹

**APIå“åº”é…ç½®**ï¼š
```typescript
// æµå¼å“åº”é…ç½®
headers: {
  'Content-Type': 'text/plain; charset=utf-8',
  'Cache-Control': 'no-cache',
  'Connection': 'keep-alive',
}
```

**å…ƒæ•°æ®é…ç½®**ï¼š
```typescript
export const metadata: Metadata = {
  title: "åº”ç”¨æ ‡é¢˜",
  description: "åº”ç”¨æè¿°",
  keywords: ["å…³é”®è¯1", "å…³é”®è¯2"],
  viewport: "width=device-width, initial-scale=1",
}
```

#### TypeScriptç±»å‹å®šä¹‰

**æ¶ˆæ¯æ¥å£**ï¼š
```typescript
interface Message {
  id: string
  content: string
  role: 'user' | 'assistant'
  timestamp: Date
  isStreaming?: boolean
}
```

**ç»„ä»¶Propsç±»å‹**ï¼š
```typescript
interface ChatPageProps {
  initialMessages?: Message[]
  sessionId?: string
}
```

**APIå“åº”ç±»å‹**ï¼š
```typescript
interface APIResponse {
  success: boolean
  data?: any
  error?: string
}
```

---

## ğŸš€ è¯¾ç¨‹æ€»ç»“ä¸å±•æœ›

### å­¦ä¹ æˆæœçš„è‚¯å®š

ğŸ‰ **æ­å–œåŒå­¦ä»¬ï¼** ä½ ä»¬åˆšåˆšå®Œæˆäº†ä¸€ä¸ªé‡è¦çš„é‡Œç¨‹ç¢‘ï¼

#### ğŸ† ä½ ä»¬ä»Šå¤©è·å¾—çš„æ ¸å¿ƒèƒ½åŠ›

1. **Next.jsæ¡†æ¶æŒæ¡èƒ½åŠ›**ï¼š
   - âœ… æ·±å…¥ç†è§£äº†App Routerçš„å·¥ä½œåŸç†
   - âœ… æŒæ¡äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç»„ä»¶çš„é€‰æ‹©ç­–ç•¥
   - âœ… å­¦ä¼šäº†åˆ›å»ºå’Œç»„ç»‡Reactç»„ä»¶
   - âœ… å…·å¤‡äº†æ„å»ºç°ä»£åŒ–Webåº”ç”¨çš„åŸºç¡€æ¶æ„èƒ½åŠ›

2. **å…¨æ ˆå¼€å‘æ€ç»´**ï¼š
   - âœ… ä½“éªŒäº†å‰åç«¯ä¸€ä½“åŒ–å¼€å‘çš„ä¾¿åˆ©
   - âœ… ç†è§£äº†APIè®¾è®¡å’Œå‰ç«¯äº¤äº’çš„å®Œæ•´æµç¨‹
   - âœ… æŒæ¡äº†æµå¼å“åº”è¿™ä¸€AIåº”ç”¨çš„å…³é”®æŠ€æœ¯
   - âœ… å»ºç«‹äº†å…¨æ ˆå¼€å‘çš„ç³»ç»Ÿæ€§æ€è€ƒæ–¹å¼

3. **å®é™…é¡¹ç›®å¼€å‘èƒ½åŠ›**ï¼š
   - âœ… èƒ½å¤Ÿç‹¬ç«‹åˆ›å»ºNext.jsåº”ç”¨çš„åŸºç¡€æ¶æ„
   - âœ… å…·å¤‡äº†å¤„ç†ç”¨æˆ·äº¤äº’å’Œæ•°æ®æµçš„æŠ€èƒ½
   - âœ… æŒæ¡äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–çš„æ–¹æ³•
   - âœ… æ‹¥æœ‰äº†å¯æ‰©å±•åº”ç”¨æ¶æ„çš„è®¾è®¡æ€è·¯

#### ğŸ¯ å®é™…çš„ä»·å€¼ä½“ç°

**ç«‹å³å¯è§çš„æˆæœ**ï¼š
- ğŸš€ æ‹¥æœ‰äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„èŠå¤©åº”ç”¨åŸºç¡€æ¶æ„
- ğŸ’¡ æŒæ¡äº†Next.jsè¿™ä¸ªä¸šç•Œé¢†å…ˆçš„å…¨æ ˆæ¡†æ¶
- ğŸ”§ å…·å¤‡äº†ç‹¬ç«‹å¼€å‘ç°ä»£åŒ–Webåº”ç”¨çš„æŠ€èƒ½
- ğŸŒŸ å»ºç«‹äº†å‰åç«¯ä¸€ä½“åŒ–å¼€å‘çš„æ€ç»´æ¨¡å¼

**é•¿æœŸæŠ€èƒ½æŠ•èµ„ä»·å€¼**ï¼š
- ğŸ“ˆ Next.jsæŠ€èƒ½åœ¨æŠ€æœ¯å¸‚åœºä¸Šæå…¶å—æ¬¢è¿
- ğŸ—ï¸ å…¨æ ˆå¼€å‘èƒ½åŠ›è®©ä½ åœ¨å›¢é˜Ÿä¸­æ›´æœ‰ä»·å€¼
- ğŸ¨ ç»„ä»¶åŒ–å’Œæ¶æ„æ€ç»´é€‚ç”¨äºå„ç§æŠ€æœ¯æ ˆ
- ğŸ”® ä¸ºå­¦ä¹ æ›´é«˜çº§çš„æŠ€æœ¯æ¦‚å¿µå¥ å®šäº†åšå®åŸºç¡€

### ä¸ä¸‹èŠ‚è¯¾çš„è¡”æ¥

#### ğŸ”— ä»Next.jsåº”ç”¨åˆ°TypeScriptç±»å‹å®‰å…¨

ä½ ä»¬ç°åœ¨å·²ç»æ‹¥æœ‰äº†åŠŸèƒ½å®Œæ•´çš„Next.jsåº”ç”¨ï¼Œä¸‹èŠ‚è¯¾ï¼ˆ3.3 TypeScriptå®é™…åº”ç”¨ï¼‰æˆ‘ä»¬å°†ä¸ºè¿™ä¸ªåº”ç”¨æ·»åŠ å®Œæ•´çš„ç±»å‹å®‰å…¨ä¿éšœï¼

**ä»Šå¤©çš„Next.jsåŸºç¡€**å°†åœ¨ä¸‹èŠ‚è¯¾å‘æŒ¥é‡è¦ä½œç”¨ï¼š
- **ç»„ä»¶ç±»å‹åŒ–**ï¼šä¸ºä»Šå¤©åˆ›å»ºçš„æ‰€æœ‰ç»„ä»¶æ·»åŠ å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **APIç±»å‹å®‰å…¨**ï¼šç¡®ä¿å‰åç«¯æ•°æ®äº¤äº’çš„ç±»å‹ä¸€è‡´æ€§
- **çŠ¶æ€ç±»å‹ç®¡ç†**ï¼šä¸ºåº”ç”¨çŠ¶æ€æä¾›ç±»å‹å®‰å…¨çš„ç®¡ç†æ–¹æ¡ˆ
- **é”™è¯¯ç±»å‹å¤„ç†**ï¼šå»ºç«‹ç±»å‹å®‰å…¨çš„é”™è¯¯å¤„ç†æœºåˆ¶

**ä¸‹èŠ‚è¯¾çš„ç²¾å½©å†…å®¹é¢„å‘Š**ï¼š
- å­¦ä¹ å¦‚ä½•ä¸ºReactç»„ä»¶å®šä¹‰å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ
- æŒæ¡APIæ¥å£çš„ç±»å‹çº¦æŸå’ŒéªŒè¯
- å®ç°ç±»å‹å®‰å…¨çš„äº‹ä»¶å¤„ç†å’Œå¼‚æ­¥æ“ä½œ
- å»ºç«‹å¯ç»´æŠ¤çš„TypeScriptå¼€å‘å·¥ä½œæµ

#### ğŸ“š å­¦ä¹ æ·±åº¦çš„è‡ªç„¶é€’è¿›

```
3.1èŠ‚ï¼šReactç»„ä»¶åŸºç¡€ â†’ æŒæ¡äº†ç»„ä»¶åˆ›å»ºå’Œä½¿ç”¨ âœ…
3.2èŠ‚ï¼šNext.jsæ¡†æ¶åº”ç”¨ â†’ æ„å»ºäº†å®Œæ•´åº”ç”¨æ¶æ„ âœ…
3.3èŠ‚ï¼šTypeScriptç±»å‹å®‰å…¨ â†’ ç¡®ä¿ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ ğŸ¯
3.4èŠ‚ï¼šTailwindæ ·å¼ç¾åŒ– â†’ å®ç°ç”¨æˆ·ç•Œé¢çš„è§†è§‰ä¼˜åŒ– ğŸ¨
```

**æŠ€èƒ½å±‚æ¬¡çš„æå‡è·¯å¾„**ï¼š
- èƒ½ç”¨ â†’ å¥½ç”¨ â†’ å®‰å…¨ â†’ ç¾è§‚
- åŠŸèƒ½ â†’ æ¶æ„ â†’ è´¨é‡ â†’ ä½“éªŒ
- åŸºç¡€ â†’ è¿›é˜¶ â†’ ä¸“ä¸š â†’ ç²¾é€š

ä¸‹èŠ‚è¯¾å®Œæˆåï¼Œä½ ä»¬å°†æ‹¥æœ‰ä¸€ä¸ª**ç±»å‹å®‰å…¨ã€æ¶æ„æ¸…æ™°ã€åŠŸèƒ½å®Œæ•´**çš„ç°ä»£åŒ–åº”ç”¨ï¼

### è¯¾åæ€è€ƒå»ºè®®

#### ğŸ¤” Next.jsç†è§£æ·±åŒ–é¢˜

**æ¶æ„è®¾è®¡æ€ç»´é¢˜**ï¼š
1. åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½ ä¼šé€‰æ‹©æœåŠ¡ç«¯ç»„ä»¶è€Œä¸æ˜¯å®¢æˆ·ç«¯ç»„ä»¶ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
2. å¦‚æœè¦æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡API Routesçš„ç»“æ„ï¼Ÿ
3. å¯¹äºä¸€ä¸ªå¤§å‹çš„èŠå¤©åº”ç”¨ï¼Œä½ ä¼šå¦‚ä½•ç»„ç»‡ç»„ä»¶å’Œé¡µé¢çš„ç›®å½•ç»“æ„ï¼Ÿ

**æŠ€æœ¯å†³ç­–æ€è€ƒé¢˜**ï¼š
1. æµå¼å“åº”ç›¸æ¯”ä¼ ç»Ÿè¯·æ±‚-å“åº”æ¨¡å¼æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥ä½¿ç”¨ï¼Ÿ
2. Next.jsçš„App Routerç›¸æ¯”Pages Routerçš„ä¸»è¦æ”¹è¿›æ˜¯ä»€ä¹ˆï¼Ÿ
3. å¦‚ä½•åœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶ï¼Œå®ç°è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Ÿ

**æ‰©å±•åŠŸèƒ½è®¾è®¡é¢˜**ï¼š
1. å¦‚æœè¦æ·»åŠ æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡APIæ¥å£ï¼Ÿ
2. å¦‚ä½•å®ç°å¤šç”¨æˆ·èŠå¤©å®¤åŠŸèƒ½ï¼Ÿéœ€è¦è€ƒè™‘å“ªäº›æŠ€æœ¯ç‚¹ï¼Ÿ
3. å¦‚ä½•ä¸ºèŠå¤©åº”ç”¨æ·»åŠ ç¦»çº¿åŠŸèƒ½æ”¯æŒï¼Ÿ

#### ğŸ’¡ å®è·µæ¢ç´¢å»ºè®®

**ä»£ç å®éªŒ**ï¼š
- å°è¯•ä¿®æ”¹æ¶ˆæ¯æ˜¾ç¤ºçš„æ ·å¼å’Œå¸ƒå±€
- æ·»åŠ æ¶ˆæ¯å‘é€æ—¶é—´çš„æ ¼å¼åŒ–æ˜¾ç¤º
- å®ç°æ¶ˆæ¯åˆ é™¤æˆ–ç¼–è¾‘åŠŸèƒ½
- åˆ›å»ºä¸åŒçš„èŠå¤©ä¸»é¢˜æ¨¡æ¿

**åŠŸèƒ½æ‰©å±•**ï¼š
- æ·»åŠ è¡¨æƒ…ç¬¦å·é€‰æ‹©å™¨
- å®ç°æ¶ˆæ¯æœç´¢åŠŸèƒ½
- åˆ›å»ºèŠå¤©è®°å½•å¯¼å‡ºåŠŸèƒ½
- æ·»åŠ æ¶ˆæ¯çŠ¶æ€æ˜¾ç¤ºï¼ˆå·²å‘é€ã€å·²è¯»ç­‰ï¼‰

**æ€§èƒ½ä¼˜åŒ–**ï¼š
- å®ç°æ¶ˆæ¯åˆ—è¡¨çš„è™šæ‹Ÿæ»šåŠ¨
- æ·»åŠ å›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½
- ä¼˜åŒ–å¤§é‡æ¶ˆæ¯æ—¶çš„æ¸²æŸ“æ€§èƒ½
- å®ç°æ¶ˆæ¯ç¼“å­˜æœºåˆ¶

### æ¿€åŠ±ç»§ç»­å­¦ä¹ 

#### ğŸŒŸ ä¸ºä½ ä»¬çš„è¿›æ­¥æ„Ÿåˆ°éª„å‚²

çœ‹åˆ°ä½ ä»¬ä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥æ„å»ºå‡ºåŠŸèƒ½å®Œæ•´çš„Next.jsåº”ç”¨ï¼Œæˆ‘çœŸçš„ä¸ºä½ ä»¬æ„Ÿåˆ°éª„å‚²ï¼æ¯ä¸€è¡Œä»£ç éƒ½ä»£è¡¨ç€ä½ ä»¬çš„æˆé•¿ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½ä½“ç°ç€ä½ ä»¬çš„è¿›æ­¥ã€‚

**ä½ ä»¬å·²ç»ä¸æ˜¯åˆå­¦è€…äº†**ï¼š
- ğŸ¯ ä½ ä»¬èƒ½å¤Ÿç†è§£å’Œåº”ç”¨å¤æ‚çš„æŠ€æœ¯æ¦‚å¿µ
- ğŸ”§ ä½ ä»¬å…·å¤‡äº†è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›
- ğŸ—ï¸ ä½ ä»¬æŒæ¡äº†ç°ä»£åŒ–åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½
- ğŸš€ ä½ ä»¬å·²ç»è¸ä¸Šäº†æˆä¸ºä¸“ä¸šå¼€å‘è€…çš„é“è·¯

#### ğŸ”¥ Next.jsçš„æ— é™å¯èƒ½

ä½ ä»¬åˆšåˆšå­¦åˆ°çš„Next.jsæŠ€èƒ½ï¼Œå°†ä¸ºä½ ä»¬æ‰“å¼€æ— æ•°æ‰‡é—¨ï¼š

**èŒä¸šå‘å±•æœºä¼š**ï¼š
- å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼šNext.jsæ˜¯æœ€å—æ¬¢è¿çš„Reactæ¡†æ¶
- å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆï¼šä¸€å¥—æŠ€æœ¯æ ˆæå®šå‰åç«¯
- äº§å“åŸå‹å¼€å‘ï¼šå¿«é€ŸéªŒè¯äº§å“æƒ³æ³•å’Œæ¦‚å¿µ
- æŠ€æœ¯åˆ›ä¸šï¼šå…·å¤‡ç‹¬ç«‹å¼€å‘äº§å“çš„æŠ€æœ¯èƒ½åŠ›

**æŠ€æœ¯æˆé•¿è·¯å¾„**ï¼š
- æ·±å…¥Reactç”Ÿæ€ï¼šReduxã€React Queryã€æµ‹è¯•ç­‰
- æ¢ç´¢æ€§èƒ½ä¼˜åŒ–ï¼šSEOã€CDNã€ç¼“å­˜ç­–ç•¥ç­‰
- å­¦ä¹ éƒ¨ç½²è¿ç»´ï¼šVercelã€AWSã€Dockerç­‰
- ç ”ç©¶æ¶æ„è®¾è®¡ï¼šå¾®å‰ç«¯ã€æœåŠ¡åŒ–ç­‰

#### ğŸ’ª ä¿æŒå­¦ä¹ çš„çƒ­æƒ…

**è®°ä½ä»Šå¤©çš„æ„Ÿå—**ï¼š
- ç¬¬ä¸€æ¬¡çœ‹åˆ°è‡ªå·±çš„ä»£ç åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å…´å¥‹
- æˆåŠŸå®ç°æµå¼å“åº”æ—¶çš„æˆå°±æ„Ÿ
- è§£å†³APIé—®é¢˜æ—¶çš„æ»¡è¶³æ„Ÿ
- çœ‹åˆ°å®Œæ•´åº”ç”¨ç•Œé¢æ—¶çš„éª„å‚²

è¿™äº›ç¾å¥½çš„æ„Ÿå—ï¼Œå°±æ˜¯æ¨åŠ¨ä½ ä»¬ç»§ç»­å‰è¿›çš„æœ€å¤§åŠ¨åŠ›ï¼

**ä¸‹ä¸€èŠ‚è¯¾è§**ï¼æˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢TypeScriptçš„ç±»å‹å®‰å…¨ä¸–ç•Œï¼Œè®©ä½ ä»¬çš„ä»£ç å˜å¾—æ›´åŠ å¥å£®å’Œå¯ç»´æŠ¤ï¼ğŸš€

---

> **å­¦ä¹ æç¤º**ï¼šNext.jsæ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„æ¡†æ¶ï¼Œéœ€è¦å¤§é‡çš„å®è·µæ‰èƒ½çœŸæ­£æŒæ¡ã€‚å»ºè®®å¤§å®¶è¯¾åå¤šåŠ¨æ‰‹å®éªŒï¼Œå°è¯•ä¸åŒçš„åŠŸèƒ½ç»„åˆï¼Œä½“éªŒNext.jsçš„å¼ºå¤§ä¹‹å¤„ã€‚è®°ä½ï¼Œæ¯ä¸€ä¸ªä¼˜ç§€çš„å¼€å‘è€…éƒ½æ˜¯ä»æ— æ•°æ¬¡çš„å®è·µä¸­æˆé•¿èµ·æ¥çš„ï¼

> **æŠ€æœ¯å±•æœ›**ï¼šæˆ‘ä»¬æ­£åœ¨å­¦ä¹ çš„è¿™äº›æŠ€æœ¯ï¼Œéƒ½æ˜¯å½“å‰ä¸šç•Œæœ€å‰æ²¿ã€æœ€å®ç”¨çš„æŠ€æœ¯æ ˆã€‚æŒæ¡äº†è¿™äº›ï¼Œä½ ä»¬å°±æ‹¥æœ‰äº†åœ¨æŠ€æœ¯ä¸–ç•Œä¸­è‡ªç”±ç¿±ç¿”çš„ç¿…è†€ï¼ç»§ç»­åŠ æ²¹ï¼ğŸ’ª


