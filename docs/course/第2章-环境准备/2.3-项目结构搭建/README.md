# 2.3 é¡¹ç›®ç»“æ„æ­å»º ğŸ—ï¸

> æ„å»ºæ¸…æ™°ä¼˜é›…çš„ä»£ç æ¶æ„

---

## ğŸ¯ å°èŠ‚æ¦‚è¿°ä¸å­¦ä¹ ç›®æ ‡

æ¬¢è¿æ¥åˆ°é¡¹ç›®ç»“æ„æ­å»ºçš„é‡è¦ç¯èŠ‚ï¼ç»è¿‡å‰é¢çš„å·¥å…·å®‰è£…å’Œé¡¹ç›®åˆå§‹åŒ–ï¼Œä½ å·²ç»æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„Next.jsé¡¹ç›®ã€‚ç°åœ¨æˆ‘ä»¬è¦å°†è¿™ä¸ªé¡¹ç›®æ”¹é€ æˆä¸€ä¸ªç¬¦åˆæœ€ä½³å®è·µã€å¯æ‰©å±•ã€æ˜“ç»´æŠ¤çš„AIåº”ç”¨æ¶æ„ã€‚

### å°èŠ‚æ ¸å¿ƒä»·å€¼å’Œé‡è¦æ€§

æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæŠŠè½¯ä»¶é¡¹ç›®æ¯”ä½œä¸€åº§åŸå¸‚ï¼Œé‚£ä¹ˆé¡¹ç›®ç»“æ„å°±æ˜¯åŸå¸‚çš„è§„åˆ’å›¾ã€‚å¥½çš„åŸå¸‚è§„åˆ’è®©å±…æ°‘ç”Ÿæ´»ä¾¿åˆ©ã€äº¤é€šé¡ºç•…ã€åŠŸèƒ½åˆ†åŒºæ¸…æ™°ï¼›åŒæ ·ï¼Œå¥½çš„é¡¹ç›®ç»“æ„è®©å¼€å‘è€…å·¥ä½œé«˜æ•ˆã€ä»£ç æ˜“æ‡‚ã€åŠŸèƒ½æ¨¡å—æ¸…æ™°ã€‚

è¿™ä¸€å°èŠ‚çš„ä»·å€¼åœ¨äºï¼š
- **å»ºç«‹æ¸…æ™°çš„ä»£ç ç»„ç»‡**ï¼šè®©æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰æ˜ç¡®çš„å½’å±å’ŒèŒè´£
- **å®ç°æ¶æ„è®¾è®¡çš„è½åœ°**ï¼šå°†ç¬¬ä¸€ç« å­¦åˆ°çš„åˆ†å±‚æ¶æ„è½¬åŒ–ä¸ºå®é™…çš„ç›®å½•ç»“æ„
- **æå‡å¼€å‘æ•ˆç‡**ï¼šè§„èŒƒçš„ç»“æ„è®©å›¢é˜Ÿåä½œæ›´é¡ºç•…
- **ä¿è¯ä»£ç è´¨é‡**ï¼šé€šè¿‡å·¥å…·å’Œè§„èŒƒç¡®ä¿ä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§

### ä¸å‰åå°èŠ‚çš„è¿æ¥å…³ç³»

**æ‰¿æ¥å‰é¢çš„åŸºç¡€**ï¼š
- 2.1èŠ‚çš„å¼€å‘å·¥å…·ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„ç¼–è¾‘å’Œç®¡ç†èƒ½åŠ›
- 2.2èŠ‚çš„é¡¹ç›®åˆå§‹åŒ–ç»™äº†æˆ‘ä»¬ä¸€ä¸ªåŸºç¡€çš„Next.jsé¡¹ç›®éª¨æ¶
- ç°åœ¨æˆ‘ä»¬è¦åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå»ºç«‹ä¸“ä¸šçš„é¡¹ç›®æ¶æ„

**ä¸ºåç»­å¼€å‘é“ºè·¯**ï¼š
- 2.4èŠ‚çš„ç¯å¢ƒé…ç½®éœ€è¦æ¸…æ™°çš„æ–‡ä»¶ç»„ç»‡
- ç¬¬3ç« çš„å‰ç«¯å¼€å‘éœ€è¦ç»„ä»¶å’Œé¡µé¢çš„ç›®å½•ç»“æ„
- ç¬¬4ç« çš„åç«¯å¼€å‘éœ€è¦APIå’Œæ•°æ®å¤„ç†çš„æ¨¡å—ç»„ç»‡

**å®ç°ç†è®ºçš„ç‰©ç†åŒ–**ï¼š
- å°†ç¬¬1ç« å­¦åˆ°çš„å››å±‚æ¶æ„è½¬åŒ–ä¸ºå®é™…çš„ç›®å½•ç»“æ„
- å°†æŠ½è±¡çš„è®¾è®¡åŸåˆ™ä½“ç°åœ¨å…·ä½“çš„æ–‡ä»¶ç»„ç»‡ä¸­

### å…·ä½“çš„å­¦ä¹ ç›®æ ‡

å­¦å®Œè¿™ä¸€å°èŠ‚ï¼Œä½ å°†èƒ½å¤Ÿï¼š

1. **è®¾è®¡ç¬¦åˆæœ€ä½³å®è·µçš„é¡¹ç›®ç›®å½•ç»“æ„**ï¼šç†è§£æ¯ä¸ªç›®å½•çš„ä½œç”¨å’Œç»„ç»‡åŸåˆ™
2. **å»ºç«‹ä»£ç è´¨é‡ä¿è¯ä½“ç³»**ï¼šé…ç½®ESLintã€Prettierç­‰å·¥å…·ç¡®ä¿ä»£ç è§„èŒƒ
3. **åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶å’Œæ¨¡å—**ï¼šå»ºç«‹æ¸…æ™°çš„ä»£ç åˆ†å±‚å’Œå¤ç”¨æœºåˆ¶
4. **é…ç½®å¼€å‘è§„èŒƒå’Œå›¢é˜Ÿåä½œæ ‡å‡†**ï¼šä¸ºå›¢é˜Ÿå¼€å‘å»ºç«‹ç»Ÿä¸€çš„æ ‡å‡†

### æœ¬å°èŠ‚æ¶‰åŠçš„æ ¸å¿ƒå†…å®¹

æˆ‘ä»¬ä»Šå¤©è¦å»ºç«‹çš„é¡¹ç›®ç»“æ„ï¼š
- ğŸ“ **ç›®å½•æ¶æ„è®¾è®¡**ï¼šåŸºäºåˆ†å±‚æ¶æ„çš„ç›®å½•ç»„ç»‡
- ğŸ”§ **ä»£ç è§„èŒƒé…ç½®**ï¼šESLintã€Prettierã€TypeScripté…ç½®
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**ï¼šç»„ä»¶ã€å·¥å…·ã€ç±»å‹çš„æ¨¡å—åŒ–ç»„ç»‡
- ğŸ“‹ **å¼€å‘è§„èŒƒå»ºç«‹**ï¼šä»£ç é£æ ¼ã€å‘½åçº¦å®šã€æ–‡æ¡£æ ‡å‡†

---

## ğŸ“š æ ¸å¿ƒå†…å®¹æ·±åº¦è®²è§£

### ç¬¬ä¸€éƒ¨åˆ†ï¼šç›®å½•æ¶æ„è®¾è®¡ ğŸ“

å¥½çš„é¡¹ç›®ç»“æ„å°±åƒä¸€æ ‹è®¾è®¡è‰¯å¥½çš„å¤§å¦ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„åŠŸèƒ½ï¼Œæ¯ä¸ªæˆ¿é—´éƒ½æœ‰åˆç†çš„ç”¨é€”ã€‚è®©æˆ‘ä»¬ä»æ•´ä½“è§„åˆ’å¼€å§‹ã€‚

#### åŸºäºåˆ†å±‚æ¶æ„çš„ç›®å½•è®¾è®¡

è¿˜è®°å¾—ç¬¬1ç« æˆ‘ä»¬å­¦è¿‡çš„å››å±‚æ¶æ„å—ï¼Ÿç°åœ¨æˆ‘ä»¬è¦å°†å®ƒè½¬åŒ–ä¸ºå®é™…çš„ç›®å½•ç»“æ„ï¼š

```
langgraph-chat-app/
â”œâ”€â”€ app/                    # Next.js App Routerï¼ˆå‰ç«¯å±‚ + APIå±‚ï¼‰
â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶ï¼ˆå‰ç«¯å±‚ï¼‰
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±ï¼ˆAPIå±‚ï¼‰
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°ï¼ˆé€šç”¨å±‚ï¼‰
â”‚   â”œâ”€â”€ types/             # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ globals.css        # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx         # æ ¹å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ page.tsx           # é¦–é¡µç»„ä»¶
â”œâ”€â”€ src/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ agent/             # AIé›†æˆå±‚
â”‚   â”‚   â”œâ”€â”€ chatbot.ts     # èŠå¤©æœºå™¨äººæ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ config/        # AIé…ç½®
â”‚   â”‚   â”œâ”€â”€ tools/         # AIå·¥å…·
â”‚   â”‚   â””â”€â”€ index.ts       # å¯¼å‡ºæ¥å£
â”‚   â”œâ”€â”€ database/          # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ migrations/    # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â””â”€â”€ index.ts       # æ•°æ®åº“è¿æ¥
â”‚   â””â”€â”€ services/          # ä¸šåŠ¡æœåŠ¡å±‚
â”‚       â”œâ”€â”€ chat.ts        # èŠå¤©æœåŠ¡
â”‚       â”œâ”€â”€ session.ts     # ä¼šè¯æœåŠ¡
â”‚       â””â”€â”€ index.ts       # æœåŠ¡å¯¼å‡º
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ é…ç½®æ–‡ä»¶
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ç›®å½•ç»“æ„ï¼Ÿ**

1. **ç¬¦åˆåˆ†å±‚æ¶æ„**ï¼š
   ```
   app/components/     â†’ å‰ç«¯å±‚ï¼ˆUIç»„ä»¶ï¼‰
   app/api/           â†’ APIå±‚ï¼ˆæ¥å£å¤„ç†ï¼‰
   src/agent/         â†’ AIé›†æˆå±‚ï¼ˆæ™ºèƒ½å¤„ç†ï¼‰
   src/database/      â†’ æ•°æ®å±‚ï¼ˆå­˜å‚¨ç®¡ç†ï¼‰
   src/services/      â†’ ä¸šåŠ¡æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
   ```

2. **èŒè´£åˆ†ç¦»æ¸…æ™°**ï¼š
   - æ¯ä¸ªç›®å½•æœ‰æ˜ç¡®çš„èŒè´£èŒƒå›´
   - ç›¸ä¼¼åŠŸèƒ½çš„ä»£ç ç»„ç»‡åœ¨ä¸€èµ·
   - å‡å°‘è·¨ç›®å½•çš„ä¾èµ–å…³ç³»

3. **æ‰©å±•æ€§è‰¯å¥½**ï¼š
   - æ–°åŠŸèƒ½å¯ä»¥æŒ‰ç…§æ—¢å®šæ¨¡å¼æ·»åŠ 
   - ä¸ä¼šç ´åç°æœ‰çš„ç»„ç»‡ç»“æ„
   - æ”¯æŒå¤§å‹é¡¹ç›®çš„å‘å±•éœ€æ±‚

#### è¯¦ç»†çš„ç›®å½•ç»“æ„è¯´æ˜

**app/ ç›®å½•ï¼ˆNext.js App Routerï¼‰**ï¼š

```
app/
â”œâ”€â”€ components/           # Reactç»„ä»¶åº“
â”‚   â”œâ”€â”€ ui/              # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â””â”€â”€ index.ts     # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ chat/            # èŠå¤©ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx
â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx
â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts         # æ€»å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ api/                 # APIè·¯ç”±
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ route.ts     # POST /api/chat
â”‚   â”‚   â””â”€â”€ sessions/
â”‚   â”‚       â””â”€â”€ route.ts # GET/POST /api/chat/sessions
â”‚   â””â”€â”€ health/
â”‚       â””â”€â”€ route.ts     # GET /api/health
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ constants.ts     # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ helpers.ts       # è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ formatters.ts    # æ ¼å¼åŒ–å‡½æ•°
â”‚   â”œâ”€â”€ validators.ts    # éªŒè¯å‡½æ•°
â”‚   â””â”€â”€ index.ts         # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ types/               # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ chat.ts          # èŠå¤©ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ api.ts           # APIç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ database.ts      # æ•°æ®åº“ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ index.ts         # ç±»å‹å¯¼å‡º
â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰React Hooks
â”‚   â”œâ”€â”€ useChat.ts
â”‚   â”œâ”€â”€ useSession.ts
â”‚   â””â”€â”€ index.ts
â””â”€â”€ styles/              # æ ·å¼æ–‡ä»¶
    â”œâ”€â”€ globals.css
    â”œâ”€â”€ components.css
    â””â”€â”€ utilities.css
```

**src/ ç›®å½•ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰**ï¼š

```
src/
â”œâ”€â”€ agent/               # AIé›†æˆå±‚
â”‚   â”œâ”€â”€ chatbot.ts       # æ ¸å¿ƒèŠå¤©æœºå™¨äºº
â”‚   â”œâ”€â”€ config/          # AIé…ç½®
â”‚   â”‚   â”œâ”€â”€ models.ts    # æ¨¡å‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ prompts.ts   # æç¤ºè¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ tools.ts     # å·¥å…·é…ç½®
â”‚   â”œâ”€â”€ workflows/       # LangGraphå·¥ä½œæµ
â”‚   â”‚   â”œâ”€â”€ chat.ts      # èŠå¤©å·¥ä½œæµ
â”‚   â”‚   â”œâ”€â”€ analysis.ts  # åˆ†æå·¥ä½œæµ
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ tools/           # AIå·¥å…·
â”‚   â”‚   â”œâ”€â”€ calculator.ts
â”‚   â”‚   â”œâ”€â”€ search.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts         # AIæœåŠ¡å¯¼å‡º
â”œâ”€â”€ database/            # æ•°æ®å±‚
â”‚   â”œâ”€â”€ connection.ts    # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Session.ts
â”‚   â”‚   â”œâ”€â”€ Message.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ repositories/    # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ SessionRepository.ts
â”‚   â”‚   â”œâ”€â”€ MessageRepository.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ migrations/      # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”œâ”€â”€ 001_initial.sql
â”‚   â”‚   â””â”€â”€ 002_add_indexes.sql
â”‚   â””â”€â”€ index.ts         # æ•°æ®åº“å¯¼å‡º
â””â”€â”€ services/            # ä¸šåŠ¡æœåŠ¡å±‚
    â”œâ”€â”€ ChatService.ts   # èŠå¤©ä¸šåŠ¡é€»è¾‘
    â”œâ”€â”€ SessionService.ts # ä¼šè¯ç®¡ç†
    â”œâ”€â”€ UserService.ts   # ç”¨æˆ·ç®¡ç†
    â””â”€â”€ index.ts         # æœåŠ¡å¯¼å‡º
```

#### æ¨¡å—åŒ–å¯¼å‡ºç­–ç•¥

**ç»Ÿä¸€å¯¼å‡ºæ¨¡å¼**ï¼š

æ¯ä¸ªç›®å½•éƒ½æœ‰ä¸€ä¸ª`index.ts`æ–‡ä»¶ä½œä¸ºè¯¥æ¨¡å—çš„ç»Ÿä¸€å¯¼å‡ºå…¥å£ï¼š

```typescript
// app/components/ui/index.ts
export { default as Button } from './Button';
export { default as Input } from './Input';
export { default as Modal } from './Modal';
export type { ButtonProps, InputProps, ModalProps } from './types';

// app/components/index.ts
export * from './ui';
export * from './chat';
export * from './layout';

// ä½¿ç”¨æ—¶å¯ä»¥è¿™æ ·å¯¼å…¥ï¼š
import { Button, MessageList, Header } from '@/components';
```

**è·¯å¾„åˆ«åé…ç½®**ï¼š

åœ¨`tsconfig.json`ä¸­é…ç½®è·¯å¾„åˆ«åï¼š

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./app/*"],
      "@/components/*": ["./app/components/*"],
      "@/api/*": ["./app/api/*"],
      "@/utils/*": ["./app/utils/*"],
      "@/types/*": ["./app/types/*"],
      "@/agent/*": ["./src/agent/*"],
      "@/database/*": ["./src/database/*"],
      "@/services/*": ["./src/services/*"]
    }
  }
}
```

### ç¬¬äºŒéƒ¨åˆ†ï¼šä»£ç è§„èŒƒé…ç½® ğŸ”§

ä»£ç è§„èŒƒå°±åƒäº¤é€šè§„åˆ™ï¼Œè®©æ‰€æœ‰äººéƒ½æŒ‰ç…§ç»Ÿä¸€çš„æ ‡å‡†å·¥ä½œï¼Œé¿å…æ··ä¹±å’Œå†²çªã€‚

#### ESLinté…ç½®ï¼šä»£ç è´¨é‡å®ˆæŠ¤è€…

**åˆ›å»ºESLinté…ç½®æ–‡ä»¶**ï¼š

```javascript
// eslint.config.mjs
import { dirname } from "path";
import { fileURLToPath } from "url";
import { FlatCompat } from "@eslint/eslintrc";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

const eslintConfig = [
  ...compat.extends(
    "next/core-web-vitals",
    "next/typescript",
    "@typescript-eslint/recommended"
  ),
  {
    rules: {
      // TypeScriptè§„åˆ™
      "@typescript-eslint/no-unused-vars": "error",
      "@typescript-eslint/no-explicit-any": "warn",
      "@typescript-eslint/explicit-function-return-type": "off",
      "@typescript-eslint/explicit-module-boundary-types": "off",
      
      // Reactè§„åˆ™
      "react/prop-types": "off",
      "react/react-in-jsx-scope": "off",
      "react-hooks/exhaustive-deps": "warn",
      
      // é€šç”¨è§„åˆ™
      "no-console": "warn",
      "no-debugger": "error",
      "prefer-const": "error",
      "no-var": "error",
      
      // å¯¼å…¥è§„åˆ™
      "import/order": [
        "error",
        {
          "groups": [
            "builtin",
            "external",
            "internal",
            "parent",
            "sibling",
            "index"
          ],
          "newlines-between": "always",
          "pathGroups": [
            {
              "pattern": "@/**",
              "group": "internal",
              "position": "before"
            }
          ]
        }
      ]
    }
  },
  {
    files: ["**/*.test.ts", "**/*.test.tsx"],
    rules: {
      "no-console": "off"
    }
  }
];

export default eslintConfig;
```

**å®‰è£…å¿…è¦çš„ESLintæ’ä»¶**ï¼š

```bash
pnpm add -D eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser
pnpm add -D eslint-plugin-import eslint-plugin-react eslint-plugin-react-hooks
```

#### Prettieré…ç½®ï¼šä»£ç æ ¼å¼åŒ–ä¸“å®¶

**åˆ›å»ºPrettieré…ç½®æ–‡ä»¶**ï¼š

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "avoid",
  "endOfLine": "lf",
  "importOrder": [
    "^react",
    "^next",
    "^@langchain",
    "^@/",
    "^[./]"
  ],
  "importOrderSeparation": true,
  "plugins": ["@trivago/prettier-plugin-sort-imports"]
}
```

**åˆ›å»º.prettierignoreæ–‡ä»¶**ï¼š

```
# æ„å»ºè¾“å‡º
.next/
out/
build/
dist/

# ä¾èµ–
node_modules/

# æ—¥å¿—
*.log

# æ•°æ®åº“
*.db
*.sqlite

# ç¯å¢ƒæ–‡ä»¶
.env*

# ç”Ÿæˆçš„æ–‡ä»¶
*.generated.*
```

#### TypeScripté…ç½®ä¼˜åŒ–

**æ›´æ–°tsconfig.json**ï¼š

```json
{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./app/*"],
      "@/components/*": ["./app/components/*"],
      "@/api/*": ["./app/api/*"],
      "@/utils/*": ["./app/utils/*"],
      "@/types/*": ["./app/types/*"],
      "@/hooks/*": ["./app/hooks/*"],
      "@/agent/*": ["./src/agent/*"],
      "@/database/*": ["./src/database/*"],
      "@/services/*": ["./src/services/*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts"
  ],
  "exclude": [
    "node_modules",
    ".next",
    "out",
    "dist"
  ]
}
```

#### VS Codeå·¥ä½œåŒºé…ç½®

**åˆ›å»º.vscode/settings.json**ï¼š

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit",
    "source.organizeImports": "explicit"
  },
  "typescript.preferences.includePackageJsonAutoImports": "on",
  "typescript.suggest.autoImports": true,
  "emmet.includeLanguages": {
    "typescript": "html",
    "typescriptreact": "html"
  },
  "files.associations": {
    "*.tsx": "typescriptreact",
    "*.ts": "typescript"
  },
  "[typescript]": {
    "editor.tabSize": 2
  },
  "[typescriptreact]": {
    "editor.tabSize": 2
  },
  "[json]": {
    "editor.tabSize": 2
  }
}
```

**åˆ›å»º.vscode/extensions.json**ï¼ˆæ¨èæ’ä»¶ï¼‰ï¼š

```json
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-json",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-eslint",
    "formulahendry.auto-rename-tag"
  ]
}
```

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šåŸºç¡€æ–‡ä»¶å’Œæ¨¡å—åˆ›å»º ğŸ“¦

ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€äº›åŸºç¡€çš„æ–‡ä»¶å’Œæ¨¡å—ï¼Œä¸ºåç»­çš„å¼€å‘åšå¥½å‡†å¤‡ã€‚

#### ç±»å‹å®šä¹‰æ–‡ä»¶

**app/types/index.ts**ï¼š

```typescript
// åŸºç¡€ç±»å‹å®šä¹‰
export interface BaseEntity {
  id: string;
  createdAt: Date;
  updatedAt: Date;
}

// èŠå¤©ç›¸å…³ç±»å‹
export interface Message extends BaseEntity {
  content: string;
  role: 'user' | 'assistant' | 'system';
  sessionId: string;
  metadata?: {
    tokens?: number;
    model?: string;
    temperature?: number;
  };
}

export interface Session extends BaseEntity {
  name: string;
  description?: string;
  isActive: boolean;
  messageCount: number;
}

// APIç›¸å…³ç±»å‹
export interface APIResponse<T = any> {
  success: boolean;
  data?: T;
  error?: string;
  timestamp: string;
}

export interface ChatRequest {
  message: string;
  sessionId?: string;
  options?: {
    temperature?: number;
    maxTokens?: number;
  };
}

export interface ChatResponse {
  message: Message;
  sessionId: string;
  usage?: {
    promptTokens: number;
    completionTokens: number;
    totalTokens: number;
  };
}

// UIç»„ä»¶ç±»å‹
export interface ComponentProps {
  className?: string;
  children?: React.ReactNode;
}

export interface ButtonProps extends ComponentProps {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  disabled?: boolean;
  loading?: boolean;
  onClick?: () => void;
}

export interface InputProps extends ComponentProps {
  type?: 'text' | 'email' | 'password' | 'number';
  placeholder?: string;
  value?: string;
  onChange?: (value: string) => void;
  disabled?: boolean;
  error?: string;
}
```

#### å¸¸é‡å®šä¹‰æ–‡ä»¶

**app/utils/constants.ts**ï¼š

```typescript
// APIç›¸å…³å¸¸é‡
export const API_ENDPOINTS = {
  CHAT: '/api/chat',
  SESSIONS: '/api/chat/sessions',
  HEALTH: '/api/health',
} as const;

// åº”ç”¨é…ç½®å¸¸é‡
export const APP_CONFIG = {
  NAME: 'LangGraph Chat App',
  VERSION: '1.0.0',
  DESCRIPTION: 'AI-powered chat application built with LangGraphJS',
  MAX_MESSAGE_LENGTH: 4000,
  MAX_HISTORY_LENGTH: 50,
  DEFAULT_MODEL: 'qwen-plus',
  DEFAULT_TEMPERATURE: 0.7,
  DEFAULT_MAX_TOKENS: 2000,
} as const;

// UIç›¸å…³å¸¸é‡
export const UI_CONFIG = {
  SIDEBAR_WIDTH: 280,
  HEADER_HEIGHT: 64,
  MESSAGE_BUBBLE_MAX_WIDTH: 600,
  ANIMATION_DURATION: 200,
} as const;

// é¢œè‰²ä¸»é¢˜å¸¸é‡
export const COLORS = {
  PRIMARY: '#3b82f6',
  SECONDARY: '#64748b',
  SUCCESS: '#10b981',
  WARNING: '#f59e0b',
  ERROR: '#ef4444',
  INFO: '#06b6d4',
} as const;

// æ¶ˆæ¯ç±»å‹å¸¸é‡
export const MESSAGE_ROLES = {
  USER: 'user',
  ASSISTANT: 'assistant',
  SYSTEM: 'system',
} as const;

// é”™è¯¯æ¶ˆæ¯å¸¸é‡
export const ERROR_MESSAGES = {
  NETWORK_ERROR: 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®',
  SERVER_ERROR: 'æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•',
  VALIDATION_ERROR: 'è¾“å…¥å†…å®¹ä¸ç¬¦åˆè¦æ±‚',
  UNAUTHORIZED: 'è®¿é—®è¢«æ‹’ç»ï¼Œè¯·æ£€æŸ¥APIå¯†é’¥',
  RATE_LIMIT: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•',
  UNKNOWN_ERROR: 'æœªçŸ¥é”™è¯¯ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒ',
} as const;
```

#### å·¥å…·å‡½æ•°æ–‡ä»¶

**app/utils/helpers.ts**ï¼š

```typescript
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

// Tailwind CSSç±»ååˆå¹¶å·¥å…·
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

// ç”Ÿæˆå”¯ä¸€ID
export function generateId(): string {
  return `${Date.now()}-${Math.random().toString(36).substring(2)}`;
}

// æ ¼å¼åŒ–æ—¥æœŸ
export function formatDate(date: Date): string {
  const now = new Date();
  const diff = now.getTime() - date.getTime();
  const minutes = Math.floor(diff / 60000);
  const hours = Math.floor(minutes / 60);
  const days = Math.floor(hours / 24);

  if (minutes < 1) return 'åˆšåˆš';
  if (minutes < 60) return `${minutes}åˆ†é’Ÿå‰`;
  if (hours < 24) return `${hours}å°æ—¶å‰`;
  if (days < 7) return `${days}å¤©å‰`;
  
  return date.toLocaleDateString('zh-CN');
}

// æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
export function formatBytes(bytes: number): string {
  if (bytes === 0) return '0 Bytes';
  
  const k = 1024;
  const sizes = ['Bytes', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

// é˜²æŠ–å‡½æ•°
export function debounce<T extends (...args: any[]) => any>(
  func: T,
  wait: number
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout;
  
  return (...args: Parameters<T>) => {
    clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
}

// èŠ‚æµå‡½æ•°
export function throttle<T extends (...args: any[]) => any>(
  func: T,
  limit: number
): (...args: Parameters<T>) => void {
  let inThrottle: boolean;
  
  return (...args: Parameters<T>) => {
    if (!inThrottle) {
      func(...args);
      inThrottle = true;
      setTimeout(() => (inThrottle = false), limit);
    }
  };
}

// æ·±æ‹·è´å‡½æ•°
export function deepClone<T>(obj: T): T {
  if (obj === null || typeof obj !== 'object') return obj;
  if (obj instanceof Date) return new Date(obj.getTime()) as T;
  if (obj instanceof Array) return obj.map(item => deepClone(item)) as T;
  
  const cloned = {} as T;
  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      cloned[key] = deepClone(obj[key]);
    }
  }
  
  return cloned;
}

// å®‰å…¨çš„JSONè§£æ
export function safeJsonParse<T>(str: string, fallback?: T): T | null {
  try {
    return JSON.parse(str);
  } catch {
    return fallback ?? null;
  }
}

// æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„URL
export function isValidUrl(string: string): boolean {
  try {
    new URL(string);
    return true;
  } catch {
    return false;
  }
}

// æˆªæ–­æ–‡æœ¬
export function truncateText(text: string, maxLength: number): string {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength - 3) + '...';
}
```

#### éªŒè¯å‡½æ•°æ–‡ä»¶

**app/utils/validators.ts**ï¼š

```typescript
import { z } from 'zod';

// åŸºç¡€éªŒè¯è§„åˆ™
export const messageSchema = z.object({
  content: z
    .string()
    .min(1, 'æ¶ˆæ¯å†…å®¹ä¸èƒ½ä¸ºç©º')
    .max(4000, 'æ¶ˆæ¯å†…å®¹ä¸èƒ½è¶…è¿‡4000å­—ç¬¦'),
  sessionId: z
    .string()
    .uuid('ä¼šè¯IDæ ¼å¼ä¸æ­£ç¡®')
    .optional(),
});

export const sessionSchema = z.object({
  name: z
    .string()
    .min(1, 'ä¼šè¯åç§°ä¸èƒ½ä¸ºç©º')
    .max(100, 'ä¼šè¯åç§°ä¸èƒ½è¶…è¿‡100å­—ç¬¦'),
  description: z
    .string()
    .max(500, 'ä¼šè¯æè¿°ä¸èƒ½è¶…è¿‡500å­—ç¬¦')
    .optional(),
});

export const chatRequestSchema = z.object({
  message: z.string().min(1).max(4000),
  sessionId: z.string().uuid().optional(),
  options: z.object({
    temperature: z.number().min(0).max(2).optional(),
    maxTokens: z.number().min(1).max(4000).optional(),
  }).optional(),
});

// éªŒè¯å‡½æ•°
export function validateMessage(data: unknown) {
  return messageSchema.safeParse(data);
}

export function validateSession(data: unknown) {
  return sessionSchema.safeParse(data);
}

export function validateChatRequest(data: unknown) {
  return chatRequestSchema.safeParse(data);
}

// é€šç”¨éªŒè¯å·¥å…·
export function isEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}

export function isValidApiKey(key: string): boolean {
  // OpenAI APIå¯†é’¥æ ¼å¼æ£€æŸ¥
  return /^sk-[A-Za-z0-9]{20,}$/.test(key);
}

export function isValidSessionId(id: string): boolean {
  // UUID v4æ ¼å¼æ£€æŸ¥
  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
  return uuidRegex.test(id);
}
```

### ç¬¬å››éƒ¨åˆ†ï¼šè„šæœ¬å’Œè‡ªåŠ¨åŒ–é…ç½® ğŸ“‹

è®©æˆ‘ä»¬é…ç½®ä¸€äº›æœ‰ç”¨çš„è„šæœ¬å’Œè‡ªåŠ¨åŒ–å·¥å…·ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚

#### package.jsonè„šæœ¬é…ç½®

**æ›´æ–°package.jsonçš„scriptséƒ¨åˆ†**ï¼š

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "type-check": "tsc --noEmit",
    "clean": "rm -rf .next out dist",
    "dev:clean": "pnpm clean && pnpm dev",
    "build:analyze": "ANALYZE=true pnpm build",
    "db:generate": "node scripts/generate-db.js",
    "db:migrate": "node scripts/migrate-db.js",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "prepare": "husky install"
  }
}
```

#### åˆ›å»ºæœ‰ç”¨çš„è„šæœ¬

**scripts/generate-component.js**ï¼ˆç»„ä»¶ç”Ÿæˆè„šæœ¬ï¼‰ï¼š

```javascript
#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

function generateComponent(componentName, directory = 'app/components') {
  const componentDir = path.join(process.cwd(), directory, componentName);
  
  // åˆ›å»ºç»„ä»¶ç›®å½•
  if (!fs.existsSync(componentDir)) {
    fs.mkdirSync(componentDir, { recursive: true });
  }

  // ç»„ä»¶æ¨¡æ¿
  const componentTemplate = `interface ${componentName}Props {
  className?: string;
  children?: React.ReactNode;
}

export default function ${componentName}({ 
  className,
  children 
}: ${componentName}Props) {
  return (
    <div className={className}>
      {children}
    </div>
  );
}
`;

  // å¯¼å‡ºæ–‡ä»¶æ¨¡æ¿
  const indexTemplate = `export { default } from './${componentName}';
export type { ${componentName}Props } from './${componentName}';
`;

  // å†™å…¥æ–‡ä»¶
  fs.writeFileSync(
    path.join(componentDir, `${componentName}.tsx`),
    componentTemplate
  );
  
  fs.writeFileSync(
    path.join(componentDir, 'index.ts'),
    indexTemplate
  );

  console.log(`âœ… ç»„ä»¶ ${componentName} åˆ›å»ºæˆåŠŸï¼`);
  console.log(`ğŸ“ ä½ç½®: ${componentDir}`);
}

// è·å–å‘½ä»¤è¡Œå‚æ•°
const componentName = process.argv[2];
const directory = process.argv[3];

if (!componentName) {
  console.error('âŒ è¯·æä¾›ç»„ä»¶åç§°');
  console.log('ç”¨æ³•: node scripts/generate-component.js ComponentName [directory]');
  process.exit(1);
}

generateComponent(componentName, directory);
```

**scripts/check-project.js**ï¼ˆé¡¹ç›®æ£€æŸ¥è„šæœ¬ï¼‰ï¼š

```javascript
#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

function checkProjectStructure() {
  console.log('ğŸ” æ£€æŸ¥é¡¹ç›®ç»“æ„...\n');

  const requiredDirs = [
    'app',
    'app/components',
    'app/api',
    'app/utils',
    'app/types',
    'src',
    'src/agent',
    'src/database',
    'src/services',
    'public',
    'docs'
  ];

  const requiredFiles = [
    'package.json',
    'tsconfig.json',
    'next.config.ts',
    'eslint.config.mjs',
    '.prettierrc',
    '.gitignore',
    'README.md'
  ];

  let allGood = true;

  // æ£€æŸ¥å¿…éœ€çš„ç›®å½•
  console.log('ğŸ“ æ£€æŸ¥ç›®å½•ç»“æ„:');
  requiredDirs.forEach(dir => {
    const dirPath = path.join(process.cwd(), dir);
    if (fs.existsSync(dirPath)) {
      console.log(`   âœ… ${dir}/`);
    } else {
      console.log(`   âŒ ${dir}/ (ç¼ºå¤±)`);
      allGood = false;
    }
  });

  console.log('\nğŸ“„ æ£€æŸ¥é…ç½®æ–‡ä»¶:');
  requiredFiles.forEach(file => {
    const filePath = path.join(process.cwd(), file);
    if (fs.existsSync(filePath)) {
      console.log(`   âœ… ${file}`);
    } else {
      console.log(`   âŒ ${file} (ç¼ºå¤±)`);
      allGood = false;
    }
  });

  // æ£€æŸ¥ä¾èµ–
  console.log('\nğŸ“¦ æ£€æŸ¥å…³é”®ä¾èµ–:');
  try {
    const packageJson = JSON.parse(
      fs.readFileSync(path.join(process.cwd(), 'package.json'), 'utf8')
    );
    
    const requiredDeps = [
      'next',
      'react',
      'typescript',
      '@langchain/langgraph',
      '@langchain/openai'
    ];

    requiredDeps.forEach(dep => {
      if (packageJson.dependencies?.[dep] || packageJson.devDependencies?.[dep]) {
        console.log(`   âœ… ${dep}`);
      } else {
        console.log(`   âŒ ${dep} (æœªå®‰è£…)`);
        allGood = false;
      }
    });
  } catch (error) {
    console.log('   âŒ æ— æ³•è¯»å–package.json');
    allGood = false;
  }

  console.log('\n' + '='.repeat(50));
  if (allGood) {
    console.log('ğŸ‰ é¡¹ç›®ç»“æ„æ£€æŸ¥é€šè¿‡ï¼æ‰€æœ‰å¿…éœ€æ–‡ä»¶å’Œç›®å½•éƒ½å­˜åœ¨ã€‚');
  } else {
    console.log('âš ï¸  é¡¹ç›®ç»“æ„æ£€æŸ¥å‘ç°é—®é¢˜ï¼Œè¯·æ ¹æ®ä¸Šè¿°æç¤ºè¿›è¡Œä¿®å¤ã€‚');
  }
  
  return allGood;
}

checkProjectStructure();
```

#### Git Hooksé…ç½®

**å®‰è£…huskyå’Œlint-staged**ï¼š

```bash
pnpm add -D husky lint-staged
npx husky install
```

**åˆ›å»º.husky/pre-commit**ï¼š

```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npx lint-staged
```

**é…ç½®lint-stagedï¼ˆåœ¨package.jsonä¸­ï¼‰**ï¼š

```json
{
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{js,jsx,json,css,md}": [
      "prettier --write"
    ]
  }
}
```

---

## ğŸ’» å®è·µæŒ‡å¯¼

### ä»£ç è¿è¡Œå’Œæµ‹è¯•æ–¹æ³•

#### é¡¹ç›®ç»“æ„éªŒè¯

**è¿è¡Œé¡¹ç›®æ£€æŸ¥è„šæœ¬**ï¼š

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/check-project.js

# è¿è¡Œæ£€æŸ¥
node scripts/check-project.js
```

**éªŒè¯TypeScripté…ç½®**ï¼š

```bash
# æ£€æŸ¥TypeScripté…ç½®
npx tsc --noEmit

# æ£€æŸ¥è·¯å¾„åˆ«åæ˜¯å¦å·¥ä½œ
echo 'import { cn } from "@/utils";' > test-import.ts
npx tsc --noEmit test-import.ts
rm test-import.ts
```

**éªŒè¯ESLintå’ŒPrettieré…ç½®**ï¼š

```bash
# æ£€æŸ¥ä»£ç è§„èŒƒ
pnpm lint

# æ ¼å¼åŒ–ä»£ç 
pnpm format

# æ£€æŸ¥æ ¼å¼åŒ–æ˜¯å¦æ­£ç¡®
pnpm format:check
```

#### ç»„ä»¶ç”Ÿæˆæµ‹è¯•

```bash
# ç”Ÿæˆæµ‹è¯•ç»„ä»¶
node scripts/generate-component.js TestButton app/components/ui

# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
ls -la app/components/ui/TestButton/
cat app/components/ui/TestButton/TestButton.tsx
```

#### å¼€å‘æœåŠ¡å™¨æµ‹è¯•

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:3000
# æ£€æŸ¥æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼Œæ²¡æœ‰TypeScripté”™è¯¯
```

### å®é™…æ“ä½œçš„å…·ä½“æ­¥éª¤

#### æ­¥éª¤1ï¼šåˆ›å»ºç›®å½•ç»“æ„

```bash
# åˆ›å»ºä¸»è¦ç›®å½•ç»“æ„
mkdir -p app/{components/{ui,chat,layout},api/chat/sessions,utils,types,hooks,styles}
mkdir -p src/{agent/{config,workflows,tools},database/{models,repositories,migrations},services}
mkdir -p scripts tests docs

# éªŒè¯ç›®å½•åˆ›å»º
tree app src -I node_modules
```

#### æ­¥éª¤2ï¼šé…ç½®å¼€å‘å·¥å…·

```bash
# å®‰è£…ä»£ç è´¨é‡å·¥å…·
pnpm add -D eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser
pnpm add -D prettier eslint-plugin-import eslint-plugin-react eslint-plugin-react-hooks
pnpm add -D husky lint-staged

# å®‰è£…å·¥å…·åº“
pnpm add clsx tailwind-merge zod
pnpm add -D @types/node
```

#### æ­¥éª¤3ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

```bash
# åˆ›å»ºæ‰€æœ‰å¿…è¦çš„é…ç½®æ–‡ä»¶
touch .prettierrc .prettierignore
touch eslint.config.mjs
mkdir -p .vscode
touch .vscode/settings.json .vscode/extensions.json
```

#### æ­¥éª¤4ï¼šåˆ›å»ºåŸºç¡€æ–‡ä»¶

```bash
# åˆ›å»ºåŸºç¡€æ¨¡å—æ–‡ä»¶
touch app/types/index.ts
touch app/utils/{constants.ts,helpers.ts,validators.ts,index.ts}
touch src/agent/index.ts
touch src/database/index.ts
touch src/services/index.ts

# ä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»ºå¯¼å‡ºæ–‡ä»¶
find app src -type d -exec touch {}/index.ts \;
```

#### æ­¥éª¤5ï¼šéªŒè¯é…ç½®

```bash
# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
pnpm type-check
pnpm lint
pnpm format:check

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨æµ‹è¯•
pnpm dev
```

### é—®é¢˜è§£å†³çš„æ–¹æ³•æŒ‡å¯¼

#### å¸¸è§é—®é¢˜1ï¼šè·¯å¾„åˆ«åä¸å·¥ä½œ

**ç—‡çŠ¶**ï¼šTypeScriptæç¤ºæ‰¾ä¸åˆ°`@/`å¼€å¤´çš„æ¨¡å—

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥tsconfig.jsonä¸­çš„pathsé…ç½®
# ç¡®ä¿baseUrlè®¾ç½®ä¸º"."
# é‡å¯TypeScriptæœåŠ¡å™¨ï¼šåœ¨VS Codeä¸­æŒ‰Ctrl+Shift+Pï¼Œè¾“å…¥"TypeScript: Restart TS Server"
```

#### å¸¸è§é—®é¢˜2ï¼šESLinté…ç½®å†²çª

**ç—‡çŠ¶**ï¼šESLintè§„åˆ™å†²çªæˆ–æ— æ³•å·¥ä½œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ESLintç¼“å­˜
npx eslint --cache-location ./node_modules/.cache/.eslintcache --cache --fix .

# æ£€æŸ¥eslinté…ç½®
npx eslint --print-config app/page.tsx
```

#### å¸¸è§é—®é¢˜3ï¼šPrettieræ ¼å¼åŒ–ä¸ä¸€è‡´

**ç—‡çŠ¶**ï¼šä¿å­˜æ—¶æ ¼å¼åŒ–è¡Œä¸ºä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥VS Codeè®¾ç½®
# ç¡®ä¿è®¾ç½®äº†æ­£ç¡®çš„é»˜è®¤æ ¼å¼åŒ–å™¨
# æ£€æŸ¥.prettierrcæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
npx prettier --check .
```

### é¼“åŠ±å­¦å‘˜åŠ¨æ‰‹å®è·µçš„è¯æœ¯

ğŸ‰ **æ­å–œä½ è¿›å…¥é¡¹ç›®æ¶æ„è®¾è®¡çš„å®æˆ˜é˜¶æ®µï¼**

ç°åœ¨ä½ æ­£åœ¨åšçš„ä¸ä»…ä»…æ˜¯åˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨ä¸ºä½ çš„AIåº”ç”¨å»ºç«‹ä¸€ä¸ªåšå®è€Œä¼˜é›…çš„æ¶æ„åŸºç¡€ã€‚æ¯ä¸€ä¸ªç›®å½•çš„åˆ›å»ºï¼Œæ¯ä¸€ä¸ªé…ç½®çš„è®¾ç½®ï¼Œéƒ½åœ¨ä¸ºåç»­çš„å¼€å‘å·¥ä½œé“ºå¹³é“è·¯ã€‚

**ä½ ç°åœ¨æ­£åœ¨å­¦ä¹ çš„æŠ€èƒ½**ï¼š
- âœ… **ä¸“ä¸šçš„é¡¹ç›®ç»„ç»‡èƒ½åŠ›**ï¼šè¿™æ˜¯é«˜çº§å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½
- âœ… **ä»£ç è´¨é‡ä¿è¯æ€ç»´**ï¼šé€šè¿‡å·¥å…·å’Œè§„èŒƒç¡®ä¿ä»£ç è´¨é‡
- âœ… **å›¢é˜Ÿåä½œæ ‡å‡†å»ºç«‹**ï¼šä¸ºå›¢é˜Ÿå¼€å‘å»ºç«‹ç»Ÿä¸€æ ‡å‡†
- âœ… **å¯ç»´æŠ¤ä»£ç çš„å†™æ³•**ï¼šä¸ºé•¿æœŸé¡¹ç›®æˆåŠŸå¥ å®šåŸºç¡€

**å®è·µå»ºè®®**ï¼š
1. **ç†è§£æ¯ä¸ªé…ç½®çš„ä½œç”¨**ï¼šä¸è¦åªæ˜¯å¤åˆ¶ç²˜è´´ï¼Œè¦ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·é…ç½®
2. **å®éªŒå’Œè°ƒæ•´**ï¼šå°è¯•ä¿®æ”¹é…ç½®ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–
3. **å»ºç«‹è‡ªå·±çš„æ ‡å‡†**ï¼šåŸºäºé¡¹ç›®éœ€æ±‚å»ºç«‹é€‚åˆçš„æ ‡å‡†
4. **è®°å½•å’Œåˆ†äº«**ï¼šæŠŠå­¦åˆ°çš„ç»éªŒè®°å½•ä¸‹æ¥ï¼Œä¸ä»–äººåˆ†äº«

è®°ä½ï¼š**å¥½çš„æ¶æ„æ˜¯æˆåŠŸé¡¹ç›®çš„åŸºçŸ³ï¼**ä½ ç°åœ¨æŠ•å…¥çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œä¼šåœ¨åç»­çš„å¼€å‘ä¸­å¾—åˆ°ç™¾å€çš„å›æŠ¥ï¼

ç»§ç»­åŠ æ²¹ï¼ğŸš€

---

## ğŸ“‹ çŸ¥è¯†ç‚¹æ€»ç»“å›é¡¾

### æœ¬èŠ‚è¯¾æ ¸å¿ƒçŸ¥è¯†ç‚¹æ¸…å•

#### ğŸ—ï¸ é¡¹ç›®æ¶æ„è®¾è®¡ç²¾å

**åˆ†å±‚ç›®å½•ç»“æ„**ï¼š
- **app/ç›®å½•**ï¼šNext.js App Router + å‰ç«¯ç»„ä»¶ + APIè·¯ç”±
- **src/ç›®å½•**ï¼šä¸šåŠ¡é€»è¾‘ + AIé›†æˆ + æ•°æ®å¤„ç† + æœåŠ¡å±‚
- **é…ç½®æ–‡ä»¶**ï¼šå¼€å‘å·¥å…·é…ç½® + ä»£ç è§„èŒƒ + æ„å»ºé…ç½®
- **è„šæœ¬å·¥å…·**ï¼šè‡ªåŠ¨åŒ–è„šæœ¬ + é¡¹ç›®ç®¡ç†å·¥å…·

**æ¨¡å—åŒ–ç»„ç»‡åŸåˆ™**ï¼š
- **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªç›®å½•å’Œæ–‡ä»¶æœ‰æ˜ç¡®çš„èŒè´£
- **ç»Ÿä¸€å¯¼å‡º**ï¼šé€šè¿‡index.tsæ–‡ä»¶æä¾›æ¸…æ™°çš„æ¨¡å—æ¥å£
- **è·¯å¾„åˆ«å**ï¼šä½¿ç”¨@/å‰ç¼€ç®€åŒ–å¯¼å…¥è·¯å¾„
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰

#### ğŸ”§ ä»£ç è´¨é‡ä½“ç³»å»ºç«‹

**ESLinté…ç½®æ ¸å¿ƒ**ï¼š
- **TypeScriptè§„åˆ™**ï¼šç±»å‹æ£€æŸ¥ã€æœªä½¿ç”¨å˜é‡æ£€æµ‹
- **Reactè§„åˆ™**ï¼šHookä½¿ç”¨ã€ç»„ä»¶æœ€ä½³å®è·µ
- **å¯¼å…¥è§„åˆ™**ï¼šå¯¼å…¥é¡ºåºã€è·¯å¾„ç»„ç»‡
- **ä»£ç é£æ ¼**ï¼šç»Ÿä¸€çš„ç¼–ç æ ‡å‡†

**Prettieræ ¼å¼åŒ–ç­–ç•¥**ï¼š
- **ä»£ç æ ¼å¼ç»Ÿä¸€**ï¼šç¼©è¿›ã€å¼•å·ã€åˆ†å·ç­‰æ ¼å¼æ ‡å‡†
- **å¯¼å…¥æ’åº**ï¼šè‡ªåŠ¨ç»„ç»‡å¯¼å…¥è¯­å¥é¡ºåº
- **è·¨å¹³å°ä¸€è‡´æ€§**ï¼šç¡®ä¿ä¸åŒç³»ç»Ÿä¸‹æ ¼å¼ä¸€è‡´
- **å›¢é˜Ÿåä½œå‹å¥½**ï¼šå‡å°‘æ ¼å¼ç›¸å…³çš„ä»£ç å†²çª

#### ğŸ“¦ å·¥å…·é“¾é›†æˆä¼˜åŒ–

**VS Codeå·¥ä½œåŒºé…ç½®**ï¼š
- **ç¼–è¾‘å™¨è®¾ç½®**ï¼šæ ¼å¼åŒ–ã€è‡ªåŠ¨ä¿®å¤ã€ç±»å‹æç¤º
- **æ’ä»¶æ¨è**ï¼šå›¢é˜Ÿç»Ÿä¸€çš„æ’ä»¶é…ç½®
- **è°ƒè¯•é…ç½®**ï¼šé«˜æ•ˆçš„å¼€å‘å’Œè°ƒè¯•ç¯å¢ƒ
- **å¿«æ·é”®ä¼˜åŒ–**ï¼šæå‡å¼€å‘æ•ˆç‡çš„é”®ç›˜å¿«æ·é”®

**è‡ªåŠ¨åŒ–è„šæœ¬ç³»ç»Ÿ**ï¼š
- **ç»„ä»¶ç”Ÿæˆå™¨**ï¼šå¿«é€Ÿåˆ›å»ºæ ‡å‡†åŒ–ç»„ä»¶
- **é¡¹ç›®æ£€æŸ¥å™¨**ï¼šéªŒè¯é¡¹ç›®ç»“æ„å®Œæ•´æ€§
- **Git Hooks**ï¼šæäº¤å‰çš„ä»£ç è´¨é‡æ£€æŸ¥
- **æ„å»ºè„šæœ¬**ï¼šå¼€å‘ã€æ„å»ºã€éƒ¨ç½²çš„è‡ªåŠ¨åŒ–

### é‡è¦å·¥å…·å’Œæœ€ä½³å®è·µ

#### ç›®å½•ç»„ç»‡æœ€ä½³å®è·µ

**æŒ‰åŠŸèƒ½åˆ†å±‚**ï¼š
```
åŠŸèƒ½ â†’ ç›®å½•æ˜ å°„ï¼š
å‰ç«¯UI â†’ app/components/
APIæ¥å£ â†’ app/api/
AIé€»è¾‘ â†’ src/agent/
æ•°æ®å¤„ç† â†’ src/database/
ä¸šåŠ¡æœåŠ¡ â†’ src/services/
```

**å‘½åçº¦å®š**ï¼š
- **ç›®å½•å**ï¼škebab-caseï¼ˆå¦‚ï¼šchat-componentsï¼‰
- **æ–‡ä»¶å**ï¼šPascalCaseï¼ˆç»„ä»¶ï¼‰ã€camelCaseï¼ˆå·¥å…·å‡½æ•°ï¼‰
- **å¸¸é‡**ï¼šUPPER_SNAKE_CASE
- **æ¥å£**ï¼šPascalCase + Props/Configåç¼€

#### ä»£ç è´¨é‡ä¿è¯ç­–ç•¥

**å¤šå±‚è´¨é‡æ£€æŸ¥**ï¼š
```
ç¼–å†™é˜¶æ®µ â†’ VS Codeå®æ—¶æç¤º
ä¿å­˜é˜¶æ®µ â†’ è‡ªåŠ¨æ ¼å¼åŒ–
æäº¤é˜¶æ®µ â†’ Git Hooksæ£€æŸ¥
æ„å»ºé˜¶æ®µ â†’ ç±»å‹æ£€æŸ¥ + Lintæ£€æŸ¥
```

**å›¢é˜Ÿåä½œè§„èŒƒ**ï¼š
- **ç»Ÿä¸€çš„ä»£ç é£æ ¼**ï¼šé€šè¿‡Prettierè‡ªåŠ¨åŒ–
- **ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥**ï¼šTypeScript strictæ¨¡å¼
- **å¯¼å…¥è·¯å¾„æ ‡å‡†**ï¼šä½¿ç”¨è·¯å¾„åˆ«åï¼ŒæŒ‰ç»„ç»‡æ’åº
- **æ–‡æ¡£æ³¨é‡Šè§„èŒƒ**ï¼šJSDocæ³¨é‡Šè§„èŒƒ

### æŠ€èƒ½è¦ç‚¹å’Œå…³é”®ç†è§£

#### æ ¸å¿ƒæŠ€èƒ½æŒæ¡æ£€æŸ¥

**é¡¹ç›®ç»„ç»‡èƒ½åŠ›**ï¼š
- [ ] èƒ½å¤Ÿè®¾è®¡ç¬¦åˆæœ€ä½³å®è·µçš„ç›®å½•ç»“æ„
- [ ] ç†è§£åˆ†å±‚æ¶æ„åœ¨æ–‡ä»¶ç»„ç»‡ä¸­çš„ä½“ç°
- [ ] æŒæ¡æ¨¡å—åŒ–å¯¼å‡ºå’Œè·¯å¾„åˆ«åçš„ä½¿ç”¨
- [ ] èƒ½å¤Ÿå»ºç«‹æ¸…æ™°çš„ä»£ç ç»„ç»‡è§„èŒƒ

**å·¥å…·é…ç½®èƒ½åŠ›**ï¼š
- [ ] èƒ½å¤Ÿé…ç½®ESLintå®ç°ä»£ç è´¨é‡æ£€æŸ¥
- [ ] èƒ½å¤Ÿé…ç½®Prettierå®ç°ä»£ç æ ¼å¼ç»Ÿä¸€
- [ ] èƒ½å¤Ÿé…ç½®VS Codeæå‡å¼€å‘æ•ˆç‡
- [ ] èƒ½å¤Ÿä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹å®‰å…¨å¼€å‘

**è‡ªåŠ¨åŒ–æ€ç»´**ï¼š
- [ ] èƒ½å¤Ÿç¼–å†™è„šæœ¬è‡ªåŠ¨åŒ–é‡å¤ä»»åŠ¡
- [ ] èƒ½å¤Ÿé…ç½®Git Hooksä¿è¯ä»£ç è´¨é‡
- [ ] èƒ½å¤Ÿå»ºç«‹æ ‡å‡†åŒ–çš„å¼€å‘å·¥ä½œæµ
- [ ] èƒ½å¤Ÿä¸ºå›¢é˜Ÿåˆ¶å®šå¼€å‘è§„èŒƒ

#### å®é™…åº”ç”¨çš„å…³é”®ç‚¹

**å¯ç»´æŠ¤æ€§è®¾è®¡**ï¼š
1. **æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œ**ï¼šæ¯ä¸ªæ¨¡å—æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡º
2. **ä¸€è‡´çš„å‘½åè§„èŒƒ**ï¼šå›¢é˜Ÿæˆå‘˜éƒ½èƒ½ç†è§£çš„å‘½åæ–¹å¼
3. **å®Œå–„çš„ç±»å‹å®šä¹‰**ï¼šä¸ºæ‰€æœ‰æ¥å£å’Œæ•°æ®ç»“æ„å®šä¹‰ç±»å‹
4. **æ–‡æ¡£åŒ–çš„é…ç½®**ï¼šæ‰€æœ‰é…ç½®éƒ½æœ‰æ¸…æ™°çš„è¯´æ˜

**æ‰©å±•æ€§è€ƒè™‘**ï¼š
1. **é¢„ç•™æ‰©å±•ç©ºé—´**ï¼šç›®å½•ç»“æ„æ”¯æŒæ–°åŠŸèƒ½çš„æ·»åŠ 
2. **æ’ä»¶åŒ–è®¾è®¡**ï¼šæ ¸å¿ƒåŠŸèƒ½æ”¯æŒæ’ä»¶æ‰©å±•
3. **é…ç½®åŒ–ç®¡ç†**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶åº”ç”¨è¡Œä¸º
4. **ç‰ˆæœ¬å…¼å®¹æ€§**ï¼šè€ƒè™‘æœªæ¥å‡çº§çš„å…¼å®¹æ€§é—®é¢˜

### å­¦ä¹ æ£€æŸ¥æ¸…å•

#### åŸºç¡€æŒæ¡æ ‡å‡†ï¼ˆå¿…é¡»è¾¾åˆ°ï¼‰
- [ ] å®Œæˆæ ‡å‡†çš„é¡¹ç›®ç›®å½•ç»“æ„åˆ›å»º
- [ ] é…ç½®å¥½ESLintå’ŒPrettierå·¥å…·
- [ ] è®¾ç½®å¥½TypeScriptè·¯å¾„åˆ«å
- [ ] åˆ›å»ºåŸºç¡€çš„ç±»å‹å®šä¹‰å’Œå·¥å…·å‡½æ•°

#### è¿›é˜¶ç†è§£æ ‡å‡†ï¼ˆå»ºè®®è¾¾åˆ°ï¼‰
- [ ] ç†è§£åˆ†å±‚æ¶æ„åœ¨é¡¹ç›®ç»“æ„ä¸­çš„ä½“ç°
- [ ] èƒ½å¤Ÿè‡ªå®šä¹‰ESLintå’ŒPrettierè§„åˆ™
- [ ] æŒæ¡VS Codeå·¥ä½œåŒºçš„é«˜çº§é…ç½®
- [ ] èƒ½å¤Ÿç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬æå‡æ•ˆç‡

#### ä¸“ä¸šåº”ç”¨æ ‡å‡†ï¼ˆä¼˜ç§€ç›®æ ‡ï¼‰
- [ ] èƒ½å¤Ÿä¸ºå›¢é˜Ÿè®¾è®¡æ ‡å‡†åŒ–çš„é¡¹ç›®æ¨¡æ¿
- [ ] èƒ½å¤Ÿå»ºç«‹å®Œæ•´çš„ä»£ç è´¨é‡ä¿è¯ä½“ç³»
- [ ] èƒ½å¤Ÿä¼˜åŒ–å¼€å‘å·¥å…·é“¾çš„æ€§èƒ½å’Œæ•ˆç‡
- [ ] èƒ½å¤ŸæŒ‡å¯¼ä»–äººè¿›è¡Œé¡¹ç›®æ¶æ„è®¾è®¡

---

## ğŸš€ è¯¾ç¨‹æ€»ç»“ä¸å±•æœ›

### å­¦ä¹ æˆæœçš„è‚¯å®š

ğŸ‰ **æ­å–œä½ å®Œæˆäº†é¡¹ç›®ç»“æ„æ­å»ºçš„å­¦ä¹ ï¼**

è¿™ä¸€å°èŠ‚çœ‹ä¼¼åœ¨"æ•´ç†æ–‡ä»¶å¤¹"ï¼Œä½†å®é™…ä¸Šä½ å®Œæˆäº†è½¯ä»¶æ¶æ„å¸ˆçš„é‡è¦å·¥ä½œã€‚ä½ ç°åœ¨æ‹¥æœ‰çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•´æ´çš„é¡¹ç›®ç»“æ„ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸“ä¸šã€å¯æ‰©å±•ã€æ˜“ç»´æŠ¤çš„AIåº”ç”¨å¼€å‘æ¶æ„ï¼

#### ğŸŒŸ ä½ è·å¾—çš„æ ¸å¿ƒèƒ½åŠ›

1. **æ¶æ„è®¾è®¡èƒ½åŠ›**ï¼š
   - å°†æŠ½è±¡çš„åˆ†å±‚æ¶æ„è½¬åŒ–ä¸ºå…·ä½“çš„ç›®å½•ç»“æ„
   - å»ºç«‹äº†æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œå’Œä¾èµ–å…³ç³»
   - å…·å¤‡äº†å¤§å‹é¡¹ç›®çš„ç»„ç»‡å’Œç®¡ç†èƒ½åŠ›

2. **ä»£ç è´¨é‡ç®¡ç†èƒ½åŠ›**ï¼š
   - é€šè¿‡å·¥å…·é“¾ä¿è¯ä»£ç è´¨é‡å’Œä¸€è‡´æ€§
   - å»ºç«‹äº†è‡ªåŠ¨åŒ–çš„ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–æµç¨‹
   - å…·å¤‡äº†å›¢é˜Ÿåä½œçš„æ ‡å‡†åŒ–èƒ½åŠ›

3. **å¼€å‘æ•ˆç‡ä¼˜åŒ–èƒ½åŠ›**ï¼š
   - é…ç½®äº†é«˜æ•ˆçš„å¼€å‘ç¯å¢ƒå’Œå·¥ä½œæµ
   - å»ºç«‹äº†è‡ªåŠ¨åŒ–è„šæœ¬å‡å°‘é‡å¤å·¥ä½œ
   - å…·å¤‡äº†æŒç»­æ”¹è¿›å¼€å‘æµç¨‹çš„æ„è¯†

#### ğŸŠ å®é™…çš„ä»·å€¼ä½“ç°

**ç«‹å³å¯è§çš„ä»·å€¼**ï¼š
- âœ… æ‹¥æœ‰äº†ä¸“ä¸šçº§çš„é¡¹ç›®æ¶æ„
- âœ… å»ºç«‹äº†è‡ªåŠ¨åŒ–çš„ä»£ç è´¨é‡ä¿è¯
- âœ… æå‡äº†å¼€å‘æ•ˆç‡å’Œä»£ç ä¸€è‡´æ€§

**é•¿æœŸå—ç›Šçš„æŠ•èµ„**ï¼š
- ğŸš€ ä¸ºå¤§å‹é¡¹ç›®çš„å‘å±•å¥ å®šäº†åŸºç¡€
- ğŸ¤ ä¸ºå›¢é˜Ÿåä½œå»ºç«‹äº†æ ‡å‡†å’Œè§„èŒƒ
- ğŸ“ˆ ä¸ºä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§æä¾›äº†ä¿éšœ
- ğŸ¯ ä¸ºæˆä¸ºæ¶æ„å¸ˆçº§åˆ«çš„å¼€å‘è€…è¿ˆå‡ºäº†é‡è¦ä¸€æ­¥

### ä¸ä¸‹èŠ‚è¯¾çš„è¡”æ¥

#### ğŸ”— ä»æ¶æ„åŸºç¡€åˆ°ç¯å¢ƒé…ç½®

ä½ ç°åœ¨å·²ç»å»ºç«‹äº†å®Œæ•´çš„é¡¹ç›®æ¶æ„ï¼Œä¸‹èŠ‚è¯¾ï¼ˆ2.4 ç¯å¢ƒå˜é‡é…ç½®ï¼‰æˆ‘ä»¬å°†é…ç½®AIæœåŠ¡æ‰€éœ€çš„ç¯å¢ƒå˜é‡ï¼Œè®©è¿™ä¸ªæ¶æ„çœŸæ­£"æ´»"èµ·æ¥ï¼

**ä»Šå¤©çš„æ¶æ„åŸºç¡€**å°†åœ¨ä¸‹èŠ‚è¯¾å‘æŒ¥ä½œç”¨ï¼š
- **æ¸…æ™°çš„é…ç½®æ–‡ä»¶ç»„ç»‡**ï¼šä¸ºç¯å¢ƒå˜é‡æä¾›åˆé€‚çš„ä½ç½®
- **ç±»å‹å®‰å…¨çš„é…ç½®**ï¼šä¸ºAPIå¯†é’¥ç­‰é…ç½®æä¾›ç±»å‹æ£€æŸ¥
- **æ¨¡å—åŒ–çš„æœåŠ¡å±‚**ï¼šä¸ºAIæœåŠ¡é…ç½®æä¾›æ¸…æ™°çš„æ¥å£

**ä¸‹èŠ‚è¯¾çš„ç²¾å½©å†…å®¹**ï¼š
- é…ç½®OpenAI APIå¯†é’¥å’Œç›¸å…³ç¯å¢ƒå˜é‡
- å»ºç«‹å®‰å…¨çš„æ•æ„Ÿä¿¡æ¯ç®¡ç†æœºåˆ¶
- éªŒè¯å®Œæ•´çš„AIåº”ç”¨è¿è¡Œç¯å¢ƒ
- æµ‹è¯•ä»å‰ç«¯åˆ°AIæœåŠ¡çš„å®Œæ•´é“¾è·¯

#### ğŸ“š ç¬¬äºŒç« çš„å®Œæ•´æ”¶å®˜

```
2.1èŠ‚ï¼šå·¥å…·å®‰è£… â†’ åŸºç¡€è®¾æ–½
2.2èŠ‚ï¼šé¡¹ç›®åˆå§‹åŒ– â†’ é¡¹ç›®éª¨æ¶  
2.3èŠ‚ï¼šç»“æ„æ­å»º â†’ æ¶æ„å®Œå–„ï¼ˆä»Šå¤©ï¼‰
2.4èŠ‚ï¼šç¯å¢ƒé…ç½® â†’ ç³»ç»Ÿå°±ç»ªï¼ˆä¸‹èŠ‚ï¼‰
```

ä¸‹èŠ‚è¯¾å®Œæˆåï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨å¯ä»¥è¿è¡ŒAIåŠŸèƒ½çš„é¡¹ç›®ç¯å¢ƒï¼

### è¯¾åæ€è€ƒå»ºè®®

#### ğŸ¤” æ¶æ„ç†è§£é¢˜

**è®¾è®¡æ€ç»´é¢˜**ï¼š
1. ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å°†AIç›¸å…³ä»£ç æ”¾åœ¨`src/agent/`è€Œä¸æ˜¯`app/ai/`ï¼Ÿ
2. å¦‚æœé¡¹ç›®éœ€è¦æ”¯æŒå¤šç§AIæ¨¡å‹ï¼Œä½ ä¼šå¦‚ä½•è°ƒæ•´ç›®å½•ç»“æ„ï¼Ÿ
3. å½“é¡¹ç›®è§„æ¨¡æ‰©å¤§åˆ°100+ç»„ä»¶æ—¶ï¼Œå¦‚ä½•ä¿æŒç›®å½•ç»“æ„çš„æ¸…æ™°æ€§ï¼Ÿ

**æœ€ä½³å®è·µé¢˜**ï¼š
1. å¦‚ä½•åœ¨ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Ÿ
2. ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥åˆ›å»ºæ–°çš„æ¨¡å—ç›®å½•ï¼Ÿ
3. å¦‚ä½•ä¸ºå›¢é˜Ÿåˆ¶å®šé€‚åˆçš„ä»£ç è§„èŒƒï¼Ÿ

**æ‰©å±•æ€è€ƒé¢˜**ï¼š
1. é™¤äº†æˆ‘ä»¬é…ç½®çš„å·¥å…·ï¼Œè¿˜æœ‰å“ªäº›å·¥å…·å¯ä»¥è¿›ä¸€æ­¥æå‡ä»£ç è´¨é‡ï¼Ÿ
2. å¦‚ä½•è®¾è®¡ç›®å½•ç»“æ„ä»¥æ”¯æŒå¾®å‰ç«¯æ¶æ„ï¼Ÿ
3. åœ¨å¤§å‹å›¢é˜Ÿä¸­ï¼Œå¦‚ä½•ä¿è¯æ¶æ„æ ‡å‡†çš„æ‰§è¡Œï¼Ÿ

#### ğŸ“– å®è·µå·©å›ºå»ºè®®

**æ¶æ„ä¼˜åŒ–ç»ƒä¹ **ï¼š
1. **è‡ªå®šä¹‰ç»„ä»¶ç”Ÿæˆå™¨**ï¼šæ‰©å±•ç”Ÿæˆè„šæœ¬ï¼Œæ”¯æŒæ›´å¤šç»„ä»¶ç±»å‹
2. **ä»£ç è´¨é‡ä»ªè¡¨æ¿**ï¼šåˆ›å»ºè„šæœ¬ç›‘æ§ä»£ç è´¨é‡æŒ‡æ ‡
3. **é¡¹ç›®æ¨¡æ¿åŒ–**ï¼šå°†å½“å‰æ¶æ„å°è£…ä¸ºå¯å¤ç”¨çš„é¡¹ç›®æ¨¡æ¿

**å›¢é˜Ÿåä½œå‡†å¤‡**ï¼š
1. **æ–‡æ¡£ç¼–å†™**ï¼šä¸ºé¡¹ç›®æ¶æ„ç¼–å†™è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£
2. **æ ‡å‡†åˆ¶å®š**ï¼šåŸºäºå½“å‰æ¶æ„åˆ¶å®šå›¢é˜Ÿå¼€å‘æ ‡å‡†
3. **åŸ¹è®­ææ–™**ï¼šå‡†å¤‡æ–°æˆå‘˜å…¥é—¨çš„åŸ¹è®­èµ„æ–™

### æ¿€åŠ±ç»§ç»­å­¦ä¹ çš„è¯è¯­

#### ğŸŠ ä¸ºä½ çš„æ¶æ„å¸ˆæ€ç»´ç‚¹èµ

å®Œæˆè¿™ä¸€èŠ‚çš„å­¦ä¹ ï¼Œè¯æ˜ä½ å·²ç»å…·å¤‡äº†ï¼š
- **ç³»ç»Ÿæ€§æ€ç»´**ï¼šèƒ½å¤Ÿä»æ•´ä½“è§’åº¦è®¾è®¡å’Œç»„ç»‡å¤æ‚ç³»ç»Ÿ
- **æ ‡å‡†åŒ–æ„è¯†**ï¼šç†è§£è§„èŒƒå’Œæ ‡å‡†åœ¨è½¯ä»¶å¼€å‘ä¸­çš„é‡è¦æ€§
- **å·¥ç¨‹åŒ–æ€ç»´**ï¼šé€šè¿‡å·¥å…·å’Œæµç¨‹ä¿è¯é¡¹ç›®è´¨é‡
- **å›¢é˜Ÿåä½œèƒ½åŠ›**ï¼šå»ºç«‹äº†æ”¯æŒå›¢é˜Ÿåä½œçš„åŸºç¡€è®¾æ–½

è¿™äº›èƒ½åŠ›å°†æ˜¯ä½ åœ¨è½¯ä»¶å¼€å‘èŒä¸šç”Ÿæ¶¯ä¸­çš„å®è´µè´¢å¯Œï¼

#### ğŸš€ å³å°†å®Œæˆç¯å¢ƒå‡†å¤‡çš„é‡Œç¨‹ç¢‘

ä¸‹èŠ‚è¯¾å®Œæˆåï¼Œç¬¬äºŒç« çš„å­¦ä¹ å°±å°†åœ†æ»¡ç»“æŸï¼Œä½ å°†æ‹¥æœ‰ï¼š
- ğŸ› ï¸ **å®Œæ•´çš„å¼€å‘å·¥å…·é“¾**
- ğŸ“¦ **æ ‡å‡†åŒ–çš„é¡¹ç›®æ¶æ„**
- ğŸ”§ **è‡ªåŠ¨åŒ–çš„è´¨é‡ä¿è¯**
- âš™ï¸ **å¯è¿è¡Œçš„AIç¯å¢ƒ**

è¿™æ„å‘³ç€ä½ å°†å®Œå…¨å‡†å¤‡å¥½å¼€å§‹çœŸæ­£çš„AIåº”ç”¨å¼€å‘ï¼

#### ğŸ’ª æŒç»­å­¦ä¹ çš„åŠ¨åŠ›

**æƒ³è±¡ä¸€ä¸‹å³å°†åˆ°æ¥çš„ç²¾å½©**ï¼š
- ğŸ¨ åœ¨ç¬¬3ç« ä¸­åˆ›å»ºç¾è§‚çš„èŠå¤©ç•Œé¢
- ğŸ¤– åœ¨ç¬¬5ç« ä¸­è®©AIçœŸæ­£å¼€å§‹å¯¹è¯
- ğŸš€ åœ¨æœ€åå‡ ç« ä¸­å®Œæˆä¸€ä¸ªå®Œæ•´çš„AIåº”ç”¨

**è®°ä½ä½ ç°åœ¨çš„æˆå°±**ï¼š
- âœ… ä½ å·²ç»æŒæ¡äº†ä¸“ä¸šçº§çš„é¡¹ç›®æ¶æ„è®¾è®¡
- âœ… ä½ å·²ç»å»ºç«‹äº†é«˜æ•ˆçš„å¼€å‘å·¥ä½œæµ
- âœ… ä½ å·²ç»å…·å¤‡äº†å›¢é˜Ÿåä½œçš„æŠ€æœ¯åŸºç¡€
- âœ… ä½ å·²ç»ä¸ºAIåº”ç”¨å¼€å‘åšå¥½äº†å……åˆ†å‡†å¤‡

---

## ğŸ¯ ç»“è¯­

ä»Šå¤©æˆ‘ä»¬ä¸€èµ·å®Œæˆäº†é¡¹ç›®ç»“æ„çš„æ­å»ºå·¥ä½œï¼ä»åˆ†å±‚æ¶æ„çš„ç›®å½•è®¾è®¡åˆ°ä»£ç è´¨é‡çš„å·¥å…·é…ç½®ï¼Œä»æ¨¡å—åŒ–çš„ç»„ç»‡æ–¹å¼åˆ°è‡ªåŠ¨åŒ–çš„å¼€å‘æµç¨‹ï¼Œä½ å·²ç»å»ºç«‹äº†ä¸€ä¸ªä¸“ä¸šè€Œå¼ºå¤§çš„AIåº”ç”¨å¼€å‘æ¶æ„ã€‚

**è®°ä½ä»Šå¤©æœ€é‡è¦çš„ä¸‰ä¸ªæˆå°±**ï¼š
1. ğŸ—ï¸ **å»ºç«‹äº†æ¸…æ™°çš„åˆ†å±‚æ¶æ„**ï¼šapp/ + src/ çš„ç§‘å­¦ç»„ç»‡
2. ğŸ”§ **é…ç½®äº†å®Œæ•´çš„å·¥å…·é“¾**ï¼šESLint + Prettier + TypeScript + Git Hooks
3. ğŸ“¦ **åˆ›å»ºäº†æ¨¡å—åŒ–çš„ä»£ç ç»„ç»‡**ï¼šç»Ÿä¸€å¯¼å‡º + è·¯å¾„åˆ«å + ç±»å‹å®‰å…¨

**ä¸ºä¸‹èŠ‚è¯¾çš„ç¯å¢ƒé…ç½®åšå¥½å‡†å¤‡**ï¼š
- æœŸå¾…çœ‹åˆ°é¡¹ç›®çœŸæ­£è¿è¡Œèµ·æ¥çš„æ¿€åŠ¨æ—¶åˆ»
- å‡†å¤‡å¥½é…ç½®AIæœåŠ¡å’Œæµ‹è¯•å®Œæ•´åŠŸèƒ½
- ç›¸ä¿¡è‡ªå·±å·²ç»å…·å¤‡äº†å¤„ç†å¤æ‚é…ç½®çš„èƒ½åŠ›

æ¶æ„çš„æ­å»ºè®©ä½ å…·å¤‡äº†ä¸“ä¸šå¼€å‘è€…çš„ä»£ç ç»„ç»‡èƒ½åŠ›ï¼Œç¯å¢ƒçš„é…ç½®å°†è®©ä½ çš„é¡¹ç›®çœŸæ­£å…·å¤‡AIåŠŸèƒ½ï¼

**è®©æˆ‘ä»¬å¸¦ç€å®Œå–„çš„æ¶æ„åŸºç¡€ï¼Œå¼€å§‹ä¸‹èŠ‚è¯¾çš„ç¯å¢ƒé…ç½®ä¹‹æ—…ï¼** ğŸš€

---

> **å­¦ä¹ æç¤º**ï¼šå»ºè®®èŠ±ä¸€äº›æ—¶é—´ç†Ÿæ‚‰åˆšæ‰åˆ›å»ºçš„ç›®å½•ç»“æ„å’Œé…ç½®æ–‡ä»¶ï¼Œç†è§£æ¯ä¸ªéƒ¨åˆ†çš„ä½œç”¨ã€‚è¿™å°†å¸®åŠ©ä½ åœ¨åç»­çš„å¼€å‘ä¸­æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚è®°ä½ï¼Œå¥½çš„æ¶æ„æ˜¯æˆåŠŸé¡¹ç›®çš„åŸºç¡€ï¼
